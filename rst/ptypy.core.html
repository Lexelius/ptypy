<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>ptypy.core package &mdash; ptypy 0.3.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/header.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.3.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="../_static/ptypyicon.ico"/>
    <link rel="top" title="ptypy 0.3.0 documentation" href="../content.html" />
    <link rel="up" title="ptypy package" href="ptypy.html" />
    <link rel="next" title="ptypy.engines package" href="ptypy.engines.html" />
    <link rel="prev" title="ptypy package" href="ptypy.html" />
<link href='http://fonts.googleapis.com/css?family=PT+Sans|Ubuntu|Cuprum' rel='stylesheet' type='text/css'>

  </head>
  <body role="document">



<div class="pageheader">
  <ul>
    <li><a href="http://ptycho.github.io/ptypy">Home</a></li>
    <li><a href="http://www.github.com/ptycho/ptypy">Github</a></li>
    <li><a href="../content.html">Docs</a></li>
    <!-- <li><a href="develop.html">Extend/Develop</a></li> -->
  </ul>
  <div>
    <a href="../index.html"><img src="../_static/logo_60px.png" alt="SPHINX" /></a>

    <h0 style="padding-bottom:40px">Ptychography for Python</h0>
  </div>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="ptypy.engines.html" title="ptypy.engines package"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="ptypy.html" title="ptypy package"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../content.html">ptypy 0.3.0 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="ptypy.html" accesskey="U">ptypy package</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../content.html">
              <img class="logo" src="../_static/logo_100px.png" alt="Logo"/>
            </a></p>
<h3><a href="../content.html">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting started with Ptypy</a></li>
<li class="toctree-l1"><a class="reference internal" href="concept.html">Concepts and Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_management.html">Data management</a></li>
<li class="toctree-l1"><a class="reference internal" href="parameters.html">Parameter tree structure</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="ptypy.html">ptypy package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="ptypy.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="">ptypy.core package</a></li>
<li class="toctree-l3"><a class="reference internal" href="ptypy.engines.html">ptypy.engines package</a></li>
<li class="toctree-l3"><a class="reference internal" href="ptypy.experiment.html">ptypy.experiment package</a></li>
<li class="toctree-l3"><a class="reference internal" href="ptypy.io.html">ptypy.io package</a></li>
<li class="toctree-l3"><a class="reference internal" href="ptypy.resources.html">ptypy.resources package</a></li>
<li class="toctree-l3"><a class="reference internal" href="ptypy.simulations.html">ptypy.simulations package</a></li>
<li class="toctree-l3"><a class="reference internal" href="ptypy.utils.html">ptypy.utils package</a></li>
<li class="toctree-l3"><a class="reference internal" href="ptypy.debug.html">ptypy.debug package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ptypy.html#module-ptypy">Module contents</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="ptypy.html"
                        title="previous chapter">ptypy package</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="ptypy.engines.html"
                        title="next chapter">ptypy.engines package</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/rst/ptypy.core.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="ptypy-core-package">
<h1>ptypy.core package<a class="headerlink" href="#ptypy-core-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-ptypy.core.classes">
<span id="ptypy-core-classes-module"></span><h2>ptypy.core.classes module<a class="headerlink" href="#module-ptypy.core.classes" title="Permalink to this headline">¶</a></h2>
<p>Container management.</p>
<p>This module defines flexible containers for the various quantities needed
for ptychographic reconstructions.</p>
<dl class="docutils">
<dt><strong>Container class</strong></dt>
<dd>A high-level container that keeps track of sub-containers (Storage)
and Views onto them. A container can copy itself to produce a buffer
needed for calculations. Some basic Mathematical operations are
implemented at this level as in place operations.
In general, operations on arrays should be done using the Views, which
simply return numpy arrays.</dd>
<dt><strong>Storage class</strong></dt>
<dd>The sub-container, wrapping a numpy array buffer. A Storage defines a
system of coordinate (for now only a scaled translation of the pixel
coordinates, but more complicated affine transformation could be
implemented if needed). The sub-class DynamicStorage can adapt the size
of its buffer (cropping and/or padding) depending on the Views.</dd>
<dt><strong>View class</strong></dt>
<dd>A low-weight class that contains all information to access a 2D piece
of a Storage within a Container. The basic idea is that the View
access is controlled by a physical position and its frame, such that
one is not bothered by memory/array addresses when accessing data.</dd>
</dl>
<p>This file is part of the PTYPY package.</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">copyright:</th><td class="field-body">Copyright 2014 by the PTYPY team, see AUTHORS.</td>
</tr>
<tr class="field-even field"><th class="field-name">license:</th><td class="field-body">GPLv2, see LICENSE for details.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="class">
<dt id="ptypy.core.classes.Container">
<em class="property">class </em><code class="descclassname">ptypy.core.classes.</code><code class="descname">Container</code><span class="sig-paren">(</span><em>owner=None</em>, <em>ID=None</em>, <em>data_type='complex'</em>, <em>data_dims=2</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.classes.Container" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ptypy.core.classes.Base" title="ptypy.core.classes.Base"><code class="xref py py-class docutils literal"><span class="pre">ptypy.core.classes.Base</span></code></a></p>
<p>High-level container class.</p>
<p>Container can be seen as a &#8220;super-numpy-array&#8221; which can contain multiple
sub-containers of type <a class="reference internal" href="#ptypy.core.classes.Storage" title="ptypy.core.classes.Storage"><code class="xref any py py-class docutils literal"><span class="pre">Storage</span></code></a>, potentially of different shape,
along with all <a class="reference internal" href="#ptypy.core.classes.View" title="ptypy.core.classes.View"><code class="xref any py py-class docutils literal"><span class="pre">View</span></code></a> instances that act on these Storages to extract
data from the internal data buffer <a class="reference internal" href="#ptypy.core.classes.Storage.data" title="ptypy.core.classes.Storage.data"><code class="xref any py py-attr docutils literal"><span class="pre">Storage.data</span></code></a>.</p>
<p>Typically there will be five such base containers in a <a class="reference internal" href="#ptypy.core.ptycho.Ptycho" title="ptypy.core.ptycho.Ptycho"><code class="xref any py py-class docutils literal"><span class="pre">Ptycho</span></code></a>
reconstruction instance:</p>
<blockquote>
<div><ul class="simple">
<li><cite>Cprobe</cite>, Storages for the illumination, i.e. <strong>probe</strong>,</li>
<li><cite>Cobj</cite>, Storages for the sample transmission, i.e. <strong>object</strong>,</li>
<li><cite>Cexit</cite>, Storages for the <strong>exit waves</strong>,</li>
<li><cite>Cdiff</cite>, Storages for <strong>diffraction data</strong>, usually one per scan,</li>
<li><cite>Cmask</cite>, Storages for <strong>masks</strong> (and weights), usually one per scan,</li>
</ul>
</div></blockquote>
<p>A container can conveniently duplicate all its internal <a class="reference internal" href="#ptypy.core.classes.Storage" title="ptypy.core.classes.Storage"><code class="xref any py py-class docutils literal"><span class="pre">Storage</span></code></a>
instances into a new Container using <a class="reference internal" href="#ptypy.core.classes.Container.copy" title="ptypy.core.classes.Container.copy"><code class="xref py py-meth docutils literal"><span class="pre">copy()</span></code></a>. This feature is
intensively used in the reconstruction engines where buffer copies
are needed to temporarily store results. These copies are referred
by the &#8220;original&#8221; container through the property <a class="reference internal" href="#ptypy.core.classes.Container.copies" title="ptypy.core.classes.Container.copies"><code class="xref py py-meth docutils literal"><span class="pre">copies()</span></code></a> and
a copy refers to its original through the attribute <code class="xref py py-attr docutils literal"><span class="pre">original</span></code>
In order to reduce the number of <a class="reference internal" href="#ptypy.core.classes.View" title="ptypy.core.classes.View"><code class="xref any py py-class docutils literal"><span class="pre">View</span></code></a> instances, Container copies
do not hold views and use instead the Views held by the original container</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Variables:</th><td class="field-body"><ul class="first simple">
<li><strong>original</strong> (<a class="reference internal" href="#ptypy.core.classes.Container" title="ptypy.core.classes.Container"><em>Container</em></a>) &#8211; If self is copy of a Container, this attribute refers to the original
Container. Otherwise it is None.</li>
<li><a class="reference internal" href="parameters.html#ptycho.data_type" title="ptycho.data_type"><strong>data_type</strong></a> (<em>str</em>) &#8211; Either &#8220;single&#8221; or &#8220;double&#8221;</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>ID</strong> (<em>str or int</em>) &#8211; A unique ID, managed by the parent.</li>
<li><strong>owner</strong> (<a class="reference internal" href="#ptypy.core.classes.Base" title="ptypy.core.classes.Base"><em>Base</em></a>) &#8211; A possible subclass of <a class="reference internal" href="#ptypy.core.classes.Base" title="ptypy.core.classes.Base"><code class="xref any py py-class docutils literal"><span class="pre">Base</span></code></a> that holds this Container.</li>
<li><strong>data_type</strong> (<em>str or numpy.dtype</em>) &#8211; data type - either a numpy.dtype object or &#8216;complex&#8217; or
&#8216;real&#8217; (precision is taken from ptycho.FType or ptycho.CType)</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="ptypy.core.classes.Container.S">
<code class="descname">S</code><a class="headerlink" href="#ptypy.core.classes.Container.S" title="Permalink to this definition">¶</a></dt>
<dd><p>A property that returns the internal dictionary of all
<a class="reference internal" href="#ptypy.core.classes.Storage" title="ptypy.core.classes.Storage"><code class="xref any py py-class docutils literal"><span class="pre">Storage</span></code></a> instances in this <a class="reference internal" href="#ptypy.core.classes.Container" title="ptypy.core.classes.Container"><code class="xref any py py-class docutils literal"><span class="pre">Container</span></code></a></p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.Container.Sp">
<code class="descname">Sp</code><a class="headerlink" href="#ptypy.core.classes.Container.Sp" title="Permalink to this definition">¶</a></dt>
<dd><p>A property that returns the internal dictionary of all
<a class="reference internal" href="#ptypy.core.classes.Storage" title="ptypy.core.classes.Storage"><code class="xref any py py-class docutils literal"><span class="pre">Storage</span></code></a> instances in this <a class="reference internal" href="#ptypy.core.classes.Container" title="ptypy.core.classes.Container"><code class="xref any py py-class docutils literal"><span class="pre">Container</span></code></a> as a <a class="reference internal" href="ptypy.utils.html#ptypy.utils.parameters.Param" title="ptypy.utils.parameters.Param"><code class="xref any py py-class docutils literal"><span class="pre">Param</span></code></a></p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.Container.V">
<code class="descname">V</code><a class="headerlink" href="#ptypy.core.classes.Container.V" title="Permalink to this definition">¶</a></dt>
<dd><p>A property that returns the internal dictionary of all
<a class="reference internal" href="#ptypy.core.classes.View" title="ptypy.core.classes.View"><code class="xref any py py-class docutils literal"><span class="pre">View</span></code></a> instances in this <a class="reference internal" href="#ptypy.core.classes.Container" title="ptypy.core.classes.Container"><code class="xref any py py-class docutils literal"><span class="pre">Container</span></code></a></p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.Container.Vp">
<code class="descname">Vp</code><a class="headerlink" href="#ptypy.core.classes.Container.Vp" title="Permalink to this definition">¶</a></dt>
<dd><p>A property that returns the internal dictionary of all
<a class="reference internal" href="#ptypy.core.classes.View" title="ptypy.core.classes.View"><code class="xref any py py-class docutils literal"><span class="pre">View</span></code></a> instances in this <a class="reference internal" href="#ptypy.core.classes.Container" title="ptypy.core.classes.Container"><code class="xref any py py-class docutils literal"><span class="pre">Container</span></code></a> as a <a class="reference internal" href="ptypy.utils.html#ptypy.utils.parameters.Param" title="ptypy.utils.parameters.Param"><code class="xref any py py-class docutils literal"><span class="pre">Param</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.classes.Container.__getitem__">
<code class="descname">__getitem__</code><span class="sig-paren">(</span><em>view</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.classes.Container.__getitem__" title="Permalink to this definition">¶</a></dt>
<dd><p>Access content through view.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>view</strong> (<a class="reference internal" href="#ptypy.core.classes.View" title="ptypy.core.classes.View"><em>View</em></a>) &#8211; A valid <a class="reference internal" href="#ptypy.core.classes.View" title="ptypy.core.classes.View"><code class="xref any py py-class docutils literal"><span class="pre">View</span></code></a> object.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.classes.Container.__setitem__">
<code class="descname">__setitem__</code><span class="sig-paren">(</span><em>view</em>, <em>newdata</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.classes.Container.__setitem__" title="Permalink to this definition">¶</a></dt>
<dd><p>Set content given by view.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>view</strong> (<a class="reference internal" href="#ptypy.core.classes.View" title="ptypy.core.classes.View"><em>View</em></a>) &#8211; A valid <a class="reference internal" href="#ptypy.core.classes.View" title="ptypy.core.classes.View"><code class="xref any py py-class docutils literal"><span class="pre">View</span></code></a> for this object</li>
<li><strong>newdata</strong> (<em>array_like</em>) &#8211; The data to be stored 2D.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.classes.Container.allreduce">
<code class="descname">allreduce</code><span class="sig-paren">(</span><em>op=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.classes.Container.allreduce" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs MPI parallel <code class="docutils literal"><span class="pre">allreduce</span></code> with a sum as reduction
for all <a class="reference internal" href="#ptypy.core.classes.Storage" title="ptypy.core.classes.Storage"><code class="xref any py py-class docutils literal"><span class="pre">Storage</span></code></a> instances held by <em>self</em></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>c</strong> (<a class="reference internal" href="#ptypy.core.classes.Container" title="ptypy.core.classes.Container"><em>Container</em></a>) &#8211; Input</li>
<li><strong>op</strong> &#8211; Reduction operation. If <code class="docutils literal"><span class="pre">None</span></code> uses sum.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="ptypy.utils.html#ptypy.utils.parallel.allreduce" title="ptypy.utils.parallel.allreduce"><code class="xref py py-meth docutils literal"><span class="pre">ptypy.utils.parallel.allreduce()</span></code></a>, <a class="reference internal" href="#ptypy.core.classes.Storage.allreduce" title="ptypy.core.classes.Storage.allreduce"><code class="xref py py-meth docutils literal"><span class="pre">Storage.allreduce()</span></code></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.classes.Container.clear">
<code class="descname">clear</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.classes.Container.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Reduce / delete all data in attached storages</p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.Container.copies">
<code class="descname">copies</code><a class="headerlink" href="#ptypy.core.classes.Container.copies" title="Permalink to this definition">¶</a></dt>
<dd><p>Property that returns list of all copies of this <a class="reference internal" href="#ptypy.core.classes.Container" title="ptypy.core.classes.Container"><code class="xref any py py-class docutils literal"><span class="pre">Container</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.classes.Container.copy">
<code class="descname">copy</code><span class="sig-paren">(</span><em>ID=None</em>, <em>fill=None</em>, <em>dtype=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.classes.Container.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new <a class="reference internal" href="#ptypy.core.classes.Container" title="ptypy.core.classes.Container"><code class="xref any py py-class docutils literal"><span class="pre">Container</span></code></a> matching self.</p>
<p>The copy does not manage views.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>fill</strong> (<em>scalar or None</em>) &#8211; If None (default), copy content. If scalar, initializes
to this value</li>
<li><strong>dtype</strong> (<em>valid data type or None</em>) &#8211; If None, the copy will have the same data type as the
original, is specified the returned instance will contain
empty buffers.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.classes.Container.delete_copy">
<code class="descname">delete_copy</code><span class="sig-paren">(</span><em>copy_IDs=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.classes.Container.delete_copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete a copy or all copies of this container from owner instance.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>copy_IDs</strong> (<em>str</em>) &#8211; ID of copy to be deleted. If None, deletes <em>all</em> copies</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.Container.dtype">
<code class="descname">dtype</code><a class="headerlink" href="#ptypy.core.classes.Container.dtype" title="Permalink to this definition">¶</a></dt>
<dd><p>Property that returns numpy dtype of all internal data buffers</p>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.classes.Container.fill">
<code class="descname">fill</code><span class="sig-paren">(</span><em>fill=0.0</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.classes.Container.fill" title="Permalink to this definition">¶</a></dt>
<dd><p>Fill all storages with scalar value <cite>fill</cite></p>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.classes.Container.formatted_report">
<code class="descname">formatted_report</code><span class="sig-paren">(</span><em>table_format=None</em>, <em>offset=8</em>, <em>align='right'</em>, <em>separator=' : '</em>, <em>include_header=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.classes.Container.formatted_report" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns formatted string and a dict with the respective information</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>table_format</strong> (<em>list</em>) &#8211; <p>List of (<em>item</em>, <em>length</em>) pairs where item is name of the info
to be listed in the report and length is the column width.
The following items are allowed:</p>
<ul>
<li><em>memory</em>, for memory usage of the storages and total use</li>
<li><em>shape</em>, for shape of internal storages</li>
<li><em>dimensions</em>, is <code class="docutils literal"><span class="pre">shape</span> <span class="pre">\*</span> <span class="pre">psize</span></code></li>
<li><em>psize</em>, for pixel size of storages</li>
<li><em>views</em>, for number of views in each storage</li>
</ul>
</li>
<li><strong>offset</strong> (<em>int, optional</em>) &#8211; First column width</li>
<li><strong>separator</strong> (<em>str, optional</em>) &#8211; Column separator</li>
<li><strong>align</strong> (<em>str, optional</em>) &#8211; Column alignment, either <code class="docutils literal"><span class="pre">'right'</span></code> or <code class="docutils literal"><span class="pre">'left'</span></code></li>
<li><strong>include_header</strong> (<em>bool</em>) &#8211; Include a header if True</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>fstring</strong> (<em>str</em>) &#8211;
Formatted string</li>
<li><strong>dct</strong> (<em>dict</em>) &#8211;
Dictionary containing with the respective info to the keys
in <cite>table_format</cite></li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#ptypy.core.classes.Storage.formatted_report" title="ptypy.core.classes.Storage.formatted_report"><code class="xref py py-meth docutils literal"><span class="pre">Storage.formatted_report()</span></code></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.classes.Container.info">
<code class="descname">info</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.classes.Container.info" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the container&#8217;s total buffer space in bytes and storage info.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><ul class="simple">
<li><strong>space</strong> (<em>int</em>) &#8211;
Accumulated memory usage of all data buffers in this Container</li>
<li><strong>fstring</strong> (<em>str</em>) &#8211;
Formatted string</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">May get <strong>deprecated</strong> in future. Use formatted_report instead.</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#ptypy.core.classes.Container.report" title="ptypy.core.classes.Container.report"><code class="xref py py-meth docutils literal"><span class="pre">report()</span></code></a>, <a class="reference internal" href="#ptypy.core.classes.Container.formatted_report" title="ptypy.core.classes.Container.formatted_report"><code class="xref py py-meth docutils literal"><span class="pre">formatted_report()</span></code></a></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.Container.nbytes">
<code class="descname">nbytes</code><a class="headerlink" href="#ptypy.core.classes.Container.nbytes" title="Permalink to this definition">¶</a></dt>
<dd><p>Return total number of bytes used by numpy array buffers
in this container. This is not the actual size in memory of the
whole container, as it does not include the views or dictionary
overhead.</p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.Container.ndim">
<code class="descname">ndim</code><em class="property"> = None</em><a class="headerlink" href="#ptypy.core.classes.Container.ndim" title="Permalink to this definition">¶</a></dt>
<dd><p>Default data dimensionality for Views and Storages.</p>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.classes.Container.new_storage">
<code class="descname">new_storage</code><span class="sig-paren">(</span><em>ID=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.classes.Container.new_storage" title="Permalink to this definition">¶</a></dt>
<dd><p>Create and register a storage object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>ID</strong> (<em>str</em>) &#8211; An ID for the storage. If None, a new ID is created. An
error will be raised if the ID already exists.</li>
<li><strong>kwargs</strong> &#8211; Arguments for new storage creation. See doc for
<a class="reference internal" href="#ptypy.core.classes.Storage" title="ptypy.core.classes.Storage"><code class="xref any py py-class docutils literal"><span class="pre">Storage</span></code></a>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.classes.Container.reformat">
<code class="descname">reformat</code><span class="sig-paren">(</span><em>also_in_copies=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.classes.Container.reformat" title="Permalink to this definition">¶</a></dt>
<dd><p>Reformats all storages in this container.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>also_in_copies</strong> (<em>bool</em>) &#8211; If True, also reformat associated copies of this container</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.classes.Container.report">
<code class="descname">report</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.classes.Container.report" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a formatted report string on all storages in this container.</p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.Container.size">
<code class="descname">size</code><a class="headerlink" href="#ptypy.core.classes.Container.size" title="Permalink to this definition">¶</a></dt>
<dd><p>Return total number of pixels in this container.</p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.Container.storages">
<code class="descname">storages</code><a class="headerlink" href="#ptypy.core.classes.Container.storages" title="Permalink to this definition">¶</a></dt>
<dd><p>A property that returns the internal dictionary of all
<a class="reference internal" href="#ptypy.core.classes.Storage" title="ptypy.core.classes.Storage"><code class="xref any py py-class docutils literal"><span class="pre">Storage</span></code></a> instances in this <a class="reference internal" href="#ptypy.core.classes.Container" title="ptypy.core.classes.Container"><code class="xref any py py-class docutils literal"><span class="pre">Container</span></code></a></p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.Container.views">
<code class="descname">views</code><a class="headerlink" href="#ptypy.core.classes.Container.views" title="Permalink to this definition">¶</a></dt>
<dd><p>A property that returns the internal dictionary of all
<a class="reference internal" href="#ptypy.core.classes.View" title="ptypy.core.classes.View"><code class="xref any py py-class docutils literal"><span class="pre">View</span></code></a> instances in this <a class="reference internal" href="#ptypy.core.classes.Container" title="ptypy.core.classes.Container"><code class="xref any py py-class docutils literal"><span class="pre">Container</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.classes.Container.views_in_storage">
<code class="descname">views_in_storage</code><span class="sig-paren">(</span><em>s</em>, <em>active_only=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.classes.Container.views_in_storage" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of views on <a class="reference internal" href="#ptypy.core.classes.Storage" title="ptypy.core.classes.Storage"><code class="xref any py py-class docutils literal"><span class="pre">Storage</span></code></a> <cite>s</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>s</strong> (<a class="reference internal" href="#ptypy.core.classes.Storage" title="ptypy.core.classes.Storage"><em>Storage</em></a>) &#8211; The storage to look for.</li>
<li><strong>active_only</strong> (<em>True or False</em>) &#8211; If True (default), return only active views.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ptypy.core.classes.Storage">
<em class="property">class </em><code class="descclassname">ptypy.core.classes.</code><code class="descname">Storage</code><span class="sig-paren">(</span><em>container</em>, <em>ID=None</em>, <em>data=None</em>, <em>shape=(1</em>, <em>1</em>, <em>1)</em>, <em>fill=0.0</em>, <em>psize=1.0</em>, <em>origin=None</em>, <em>layermap=None</em>, <em>padonly=False</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.classes.Storage" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ptypy.core.classes.Base" title="ptypy.core.classes.Base"><code class="xref py py-class docutils literal"><span class="pre">ptypy.core.classes.Base</span></code></a></p>
<p>Inner container handling access to data arrays.</p>
<p>This class essentially manages access to an internal numpy array
buffer called <a class="reference internal" href="#ptypy.core.classes.Storage.data" title="ptypy.core.classes.Storage.data"><code class="xref py py-attr docutils literal"><span class="pre">data</span></code></a></p>
<ul class="simple">
<li>It returns a view to coordinates given (slicing)</li>
<li>It contains a physical coordinate grid</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>container</strong> (<a class="reference internal" href="#ptypy.core.classes.Container" title="ptypy.core.classes.Container"><em>Container</em></a>) &#8211; The container instance</li>
<li><strong>ID</strong> (<em>None, str or int</em>) &#8211; A unique ID, managed by the parent, if None ID is generated
by parent.</li>
<li><strong>data</strong> (<em>ndarray or None</em>) &#8211; A numpy array to use as initial buffer.
<em>Deprecated</em> in v0.3, use fill method instead.</li>
<li><strong>shape</strong> (<em>tuple, int, or None</em>) &#8211; The shape of the buffer. If None or int, the dimensionality
is found from the owning Container instance.</li>
<li><strong>fill</strong> (<em>float or complex</em>) &#8211; The default value to fill storage with, will be converted to
data type of owner.</li>
<li><strong>psize</strong> (<em>float or 2-tuple of float</em>) &#8211; The physical pixel size.</li>
<li><strong>origin</strong> (<em>2-tuple of int</em>) &#8211; The physical coordinates of the [0,0] pixel (upper-left
corner of the storage buffer).</li>
<li><strong>layermap</strong> (<em>list or None</em>) &#8211; A list (or 1D numpy array) mapping input layer indices
to the internal buffer. This may be useful if the buffer
contains only a portion of a larger data set (as when using
distributed data with MPI). If None, provide direct access.
to the 3d internal data.</li>
<li><strong>padonly</strong> (<em>bool</em>) &#8211; If True, reformat() will enlarge the internal buffer if needed,
but will not shrink it.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="ptypy.core.classes.Storage.__getitem__">
<code class="descname">__getitem__</code><span class="sig-paren">(</span><em>v</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.classes.Storage.__getitem__" title="Permalink to this definition">¶</a></dt>
<dd><p>Storage[v]</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The view to internal data buffer corresponding to View or layer <cite>v</cite></td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">ndarray</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.classes.Storage.__setitem__">
<code class="descname">__setitem__</code><span class="sig-paren">(</span><em>v</em>, <em>newdata</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.classes.Storage.__setitem__" title="Permalink to this definition">¶</a></dt>
<dd><p>Storage[v] = newdata</p>
<p>Set internal data buffer to <cite>newdata</cite> for the region of view <cite>v</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>v</strong> (<a class="reference internal" href="#ptypy.core.classes.View" title="ptypy.core.classes.View"><em>View</em></a>) &#8211; A View for this storage</li>
<li><strong>newdata</strong> (<em>ndarray</em>) &#8211; Two-dimensional array that fits the view&#8217;s shape</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.classes.Storage.allreduce">
<code class="descname">allreduce</code><span class="sig-paren">(</span><em>op=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.classes.Storage.allreduce" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs MPI parallel <code class="docutils literal"><span class="pre">allreduce</span></code> with a default sum as
reduction operation for internal data buffer <code class="docutils literal"><span class="pre">self.data</span></code>.
This method does nothing if the storage is distributed across
nodes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>op</strong> &#8211; Reduction operation. If <code class="docutils literal"><span class="pre">None</span></code> uses sum.</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="ptypy.utils.html#ptypy.utils.parallel.allreduce" title="ptypy.utils.parallel.allreduce"><code class="xref py py-meth docutils literal"><span class="pre">ptypy.utils.parallel.allreduce()</span></code></a>, <a class="reference internal" href="#ptypy.core.classes.Container.allreduce" title="ptypy.core.classes.Container.allreduce"><code class="xref py py-meth docutils literal"><span class="pre">Container.allreduce()</span></code></a></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.Storage.center">
<code class="descname">center</code><a class="headerlink" href="#ptypy.core.classes.Storage.center" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the position of the origin relative to the upper-left corner
of the storage, in pixel coordinates</p>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.classes.Storage.copy">
<code class="descname">copy</code><span class="sig-paren">(</span><em>owner=None</em>, <em>ID=None</em>, <em>fill=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.classes.Storage.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a copy of this storage object.</p>
<p>Note: the returned copy has the same container as self.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>ID</strong> (<em>str or int</em>) &#8211; A unique ID, managed by the parent</li>
<li><strong>fill</strong> (<em>scalar or None</em>) &#8211; If float, set the content to this value. If None, copy the
current content.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.Storage.data">
<code class="descname">data</code><em class="property"> = None</em><a class="headerlink" href="#ptypy.core.classes.Storage.data" title="Permalink to this definition">¶</a></dt>
<dd><p>Three/four or potentially N-dimensional array as data buffer</p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.Storage.dtype">
<code class="descname">dtype</code><a class="headerlink" href="#ptypy.core.classes.Storage.dtype" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ptypy.core.classes.Storage.fill">
<code class="descname">fill</code><span class="sig-paren">(</span><em>fill=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.classes.Storage.fill" title="Permalink to this definition">¶</a></dt>
<dd><p>Fill managed buffer.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>fill</strong> (<em>scalar, numpy array or None.</em>) &#8211; Fill value to use. If fill is a numpy array, it is cast
as self.dtype and self.shape is updated to reflect the
new buffer shape. If fill is None, use default value
(self.fill_value).</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.Storage.fill_value">
<code class="descname">fill_value</code><em class="property"> = None</em><a class="headerlink" href="#ptypy.core.classes.Storage.fill_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Default fill value</p>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.classes.Storage.formatted_report">
<code class="descname">formatted_report</code><span class="sig-paren">(</span><em>table_format=None</em>, <em>offset=8</em>, <em>align='right'</em>, <em>separator=' : '</em>, <em>include_header=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.classes.Storage.formatted_report" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns formatted string and a dict with the respective information</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>table_format</strong> (<em>list, optional</em>) &#8211; <p>List of (<em>item</em>,*length*) pairs where item is name of the info
to be listed in the report and length is the column width.
The following items are allowed:</p>
<ul>
<li><em>memory</em>, for memory usage of the storages and total use</li>
<li><em>shape</em>, for shape of internal storages</li>
<li><em>dimensions</em>, is <code class="docutils literal"><span class="pre">shape</span> <span class="pre">\*</span> <span class="pre">psize</span></code></li>
<li><em>psize</em>, for pixel size of storages</li>
<li><em>views</em>, for number of views in each storage</li>
</ul>
</li>
<li><strong>offset</strong> (<em>int, optional</em>) &#8211; First column width</li>
<li><strong>separator</strong> (<em>str, optional</em>) &#8211; Column separator.</li>
<li><strong>align</strong> (<em>str, optional</em>) &#8211; Column alignment, either <code class="docutils literal"><span class="pre">'right'</span></code> or <code class="docutils literal"><span class="pre">'left'</span></code>.</li>
<li><strong>include_header</strong> (<em>bool, optional</em>) &#8211; Include a header if True.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>fstring</strong> (<em>str</em>) &#8211;
Formatted string</li>
<li><strong>dct</strong> (<em>dict</em>) &#8211;
Dictionary containing with the respective info to the keys
in <cite>table_format</cite></li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.classes.Storage.get_view_coverage">
<code class="descname">get_view_coverage</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.classes.Storage.get_view_coverage" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an array in the shape of internal buffer where the value
of each pixel represents the number of views that cover that pixel</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">view coverage in the shape of internal buffer</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">ndarray</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.classes.Storage.grids">
<code class="descname">grids</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.classes.Storage.grids" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>x, y</strong> &#8211;
grids in the shape of internal buffer</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">ndarray</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.Storage.ndim">
<code class="descname">ndim</code><a class="headerlink" href="#ptypy.core.classes.Storage.ndim" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of dimensions for <a class="reference internal" href="#ptypy.core.classes.View" title="ptypy.core.classes.View"><code class="xref any py py-class docutils literal"><span class="pre">View</span></code></a> access</p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.Storage.origin">
<code class="descname">origin</code><a class="headerlink" href="#ptypy.core.classes.Storage.origin" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the physical position of the upper-left corner of the storage.</p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.Storage.psize">
<code class="descname">psize</code><a class="headerlink" href="#ptypy.core.classes.Storage.psize" title="Permalink to this definition">¶</a></dt>
<dd><p>The pixel size.</p>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.classes.Storage.reformat">
<code class="descname">reformat</code><span class="sig-paren">(</span><em>newID=None</em>, <em>update=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.classes.Storage.reformat" title="Permalink to this definition">¶</a></dt>
<dd><p>Crop or pad if required.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>newID</strong> (<em>str or int</em>) &#8211; If None (default) act on self. Otherwise create a copy
of self before doing the cropping and padding.</li>
<li><strong>update</strong> (<em>bool</em>) &#8211; If True, updates all Views before reformatting. Not necessarily
needed, if Views have been recently instantiated. Roughly doubles
execution time.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>s</strong> &#8211;
returns new Storage instance in same <a class="reference internal" href="#ptypy.core.classes.Container" title="ptypy.core.classes.Container"><code class="xref any py py-class docutils literal"><span class="pre">Container</span></code></a> if
<cite>newId</cite> is not None.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#ptypy.core.classes.Storage" title="ptypy.core.classes.Storage">Storage</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.classes.Storage.report">
<code class="descname">report</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.classes.Storage.report" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a formatted string giving a report on this storage.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">str</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.classes.Storage.update">
<code class="descname">update</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.classes.Storage.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update internal state, including all views on this storage to
ensure consistency with the physical coordinate system.</p>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.classes.Storage.update_views">
<code class="descname">update_views</code><span class="sig-paren">(</span><em>v=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.classes.Storage.update_views" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the access information for a given view.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>v</strong> (<em>View or None</em>) &#8211; The view object to update. If None, loop through all views.
Apart from that, no check is done, not even whether
the view is actually on self. Use cautiously.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.Storage.views">
<code class="descname">views</code><a class="headerlink" href="#ptypy.core.classes.Storage.views" title="Permalink to this definition">¶</a></dt>
<dd><p>Return all the views that refer to this storage.</p>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.classes.Storage.zoom_to_psize">
<code class="descname">zoom_to_psize</code><span class="sig-paren">(</span><em>new_psize</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.classes.Storage.zoom_to_psize" title="Permalink to this definition">¶</a></dt>
<dd><p>Changes pixel size and zooms the data buffer along last two axis
accordingly, updates all attached views and reformats if necessary.
<strong>untested!!</strong></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>new_psize</strong> (<em>scalar or array_like</em>) &#8211; new pixel size</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ptypy.core.classes.View">
<em class="property">class </em><code class="descclassname">ptypy.core.classes.</code><code class="descname">View</code><span class="sig-paren">(</span><em>container</em>, <em>ID=None</em>, <em>accessrule=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.classes.View" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ptypy.core.classes.Base" title="ptypy.core.classes.Base"><code class="xref py py-class docutils literal"><span class="pre">ptypy.core.classes.Base</span></code></a></p>
<p>A &#8216;window&#8217; on a Container.</p>
<p>A view stores all the slicing information to extract a 2D piece
of Container.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The final structure of this class is yet up to debate
and the constructor signature may change. Especially since
&#8216;DEFAULT_ACCESSRULE&#8217; is yet so small, its contents could be
incorporated in the constructor call.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>container</strong> (<a class="reference internal" href="#ptypy.core.classes.Container" title="ptypy.core.classes.Container"><em>Container</em></a>) &#8211; The Container instance this view applies to.</li>
<li><strong>ID</strong> (<em>str or int</em>) &#8211; ID for this view. Automatically built from ID if None.</li>
<li><strong>accessrule</strong> (<em>dict</em>) &#8211; All the information necessary to access the wanted slice.
Maybe subject to change as code evolve. See keyword arguments
Almost all keys of accessrule will be available as attributes
in the constructed View instance.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><ul class="first last simple">
<li><strong>storageID</strong> (<em>str</em>) &#8211;
ID of storage, If the Storage does not exist
it will be created! (<em>default</em> is <code class="docutils literal"><span class="pre">None</span></code>)</li>
<li><strong>shape</strong> (<em>int or tuple of int</em>) &#8211;
Shape of the view in pixels (<em>default</em> is <code class="docutils literal"><span class="pre">None</span></code>)</li>
<li><strong>coord</strong> (<em>2-tuple of float,</em>) &#8211;
Physical coordinates <em>(meter)</em> of the center of the view.</li>
<li><strong>psize</strong> (<em>float or tuple of float</em>) &#8211;
Pixel size in <em>(meter)</em> . Required for storage initialization.</li>
<li><strong>layer</strong> (<em>int</em>) &#8211;
Index of the third dimension if applicable.
(<em>default</em> is <code class="docutils literal"><span class="pre">0</span></code>)</li>
<li><strong>active</strong> (<em>bool</em>) &#8211;
Whether this view is active (<em>default</em> is <code class="docutils literal"><span class="pre">True</span></code>)</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="ptypy.core.classes.View.DEFAULT_ACCESSRULE">
<code class="descname">DEFAULT_ACCESSRULE</code><em class="property"> = Param({'layer': 0, 'coord': None, 'psize': 1.0, 'shape': None, 'storageID': None, 'active': True})</em><a class="headerlink" href="#ptypy.core.classes.View.DEFAULT_ACCESSRULE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.View.ID">
<code class="descname">ID</code><a class="headerlink" href="#ptypy.core.classes.View.ID" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.View.active">
<code class="descname">active</code><a class="headerlink" href="#ptypy.core.classes.View.active" title="Permalink to this definition">¶</a></dt>
<dd><p>Active state. If False this view will be ignored when
resizing the data buffer of the associated <a class="reference internal" href="#ptypy.core.classes.Storage" title="ptypy.core.classes.Storage"><code class="xref any py py-class docutils literal"><span class="pre">Storage</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.View.coord">
<code class="descname">coord</code><a class="headerlink" href="#ptypy.core.classes.View.coord" title="Permalink to this definition">¶</a></dt>
<dd><p>The View&#8217;s physical coordinate (meters)</p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.View.data">
<code class="descname">data</code><a class="headerlink" href="#ptypy.core.classes.View.data" title="Permalink to this definition">¶</a></dt>
<dd><p>The view content in data buffer of associated storage.</p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.View.dcoord">
<code class="descname">dcoord</code><a class="headerlink" href="#ptypy.core.classes.View.dcoord" title="Permalink to this definition">¶</a></dt>
<dd><p>Center coordinate (index) in data buffer.</p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.View.dhigh">
<code class="descname">dhigh</code><a class="headerlink" href="#ptypy.core.classes.View.dhigh" title="Permalink to this definition">¶</a></dt>
<dd><p>High side of the View&#8217;s data range.</p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.View.dlayer">
<code class="descname">dlayer</code><a class="headerlink" href="#ptypy.core.classes.View.dlayer" title="Permalink to this definition">¶</a></dt>
<dd><p>The &#8220;layer&#8221; i.e. first axis index in Storage data buffer</p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.View.dlow">
<code class="descname">dlow</code><a class="headerlink" href="#ptypy.core.classes.View.dlow" title="Permalink to this definition">¶</a></dt>
<dd><p>Low side of the View&#8217;s data range.</p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.View.error">
<code class="descname">error</code><a class="headerlink" href="#ptypy.core.classes.View.error" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.View.layer">
<code class="descname">layer</code><a class="headerlink" href="#ptypy.core.classes.View.layer" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.View.ndim">
<code class="descname">ndim</code><a class="headerlink" href="#ptypy.core.classes.View.ndim" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.View.numID">
<code class="descname">numID</code><a class="headerlink" href="#ptypy.core.classes.View.numID" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.View.owner">
<code class="descname">owner</code><a class="headerlink" href="#ptypy.core.classes.View.owner" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.View.pcoord">
<code class="descname">pcoord</code><a class="headerlink" href="#ptypy.core.classes.View.pcoord" title="Permalink to this definition">¶</a></dt>
<dd><p>The physical coordinate in pixel space</p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.View.pod">
<code class="descname">pod</code><a class="headerlink" href="#ptypy.core.classes.View.pod" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns first <a class="reference internal" href="#ptypy.core.classes.POD" title="ptypy.core.classes.POD"><code class="xref any py py-class docutils literal"><span class="pre">POD</span></code></a> in the <code class="docutils literal"><span class="pre">self.pods</span></code> dict.
This is a common call in the code and has therefore found
its way here. May return <code class="docutils literal"><span class="pre">None</span></code> if there is no pod connected.</p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.View.pods">
<code class="descname">pods</code><a class="headerlink" href="#ptypy.core.classes.View.pods" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns all :any:<a href="#id1"><span class="problematic" id="id2">`</span></a>POD`s still connected to this view as a dict.</p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.View.psize">
<code class="descname">psize</code><a class="headerlink" href="#ptypy.core.classes.View.psize" title="Permalink to this definition">¶</a></dt>
<dd><p>Pixel size of the View.</p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.View.shape">
<code class="descname">shape</code><a class="headerlink" href="#ptypy.core.classes.View.shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Two dimensional shape of View.</p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.View.slice">
<code class="descname">slice</code><a class="headerlink" href="#ptypy.core.classes.View.slice" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a slice-tuple according to <code class="docutils literal"><span class="pre">self.layer</span></code>, <code class="docutils literal"><span class="pre">self.dlow</span></code>
and <code class="docutils literal"><span class="pre">self.dhigh</span></code>.
Please note, that this may not always makes sense</p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.View.sp">
<code class="descname">sp</code><a class="headerlink" href="#ptypy.core.classes.View.sp" title="Permalink to this definition">¶</a></dt>
<dd><p>The subpixel difference (meters) between physical coordinate
and data coordinate.</p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.View.storage">
<code class="descname">storage</code><a class="headerlink" href="#ptypy.core.classes.View.storage" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#ptypy.core.classes.Storage" title="ptypy.core.classes.Storage"><code class="xref py py-class docutils literal"><span class="pre">Storage</span></code></a> instance that this view applies to by default.</p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.View.storageID">
<code class="descname">storageID</code><a class="headerlink" href="#ptypy.core.classes.View.storageID" title="Permalink to this definition">¶</a></dt>
<dd><p>The storage ID that this view will be forward to if applied
to a <a class="reference internal" href="#ptypy.core.classes.Container" title="ptypy.core.classes.Container"><code class="xref any py py-class docutils literal"><span class="pre">Container</span></code></a>.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ptypy.core.classes.POD">
<em class="property">class </em><code class="descclassname">ptypy.core.classes.</code><code class="descname">POD</code><span class="sig-paren">(</span><em>ptycho=None</em>, <em>model=None</em>, <em>ID=None</em>, <em>views=None</em>, <em>geometry=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.classes.POD" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ptypy.core.classes.Base" title="ptypy.core.classes.Base"><code class="xref py py-class docutils literal"><span class="pre">ptypy.core.classes.Base</span></code></a></p>
<p>POD : Ptychographic Object Descriptor</p>
<p>A POD brings together probe view, object view and diff view. It also
gives access to &#8220;exit&#8221;, a (coherent) exit wave, and to propagation
objects to go from exit to diff space.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>ptycho</strong> (<a class="reference internal" href="#ptypy.core.ptycho.Ptycho" title="ptypy.core.ptycho.Ptycho"><em>Ptycho</em></a>) &#8211; The instance of Ptycho associated with this pod.</li>
<li><strong>model</strong> (<a class="reference internal" href="#ptypy.core.manager.ScanModel" title="ptypy.core.manager.ScanModel"><em>ScanModel</em></a>) &#8211; The instance of ScanModel (or it subclasses) which describes
this pod.</li>
<li><strong>ID</strong> (<em>str or int</em>) &#8211; The pod ID, If None it is managed by the ptycho.</li>
<li><strong>views</strong> (<em>dict or Param</em>) &#8211; The views. See <a class="reference internal" href="#ptypy.core.classes.POD.DEFAULT_VIEWS" title="ptypy.core.classes.POD.DEFAULT_VIEWS"><code class="xref py py-attr docutils literal"><span class="pre">DEFAULT_VIEWS</span></code></a>.</li>
<li><strong>geometry</strong> (<a class="reference internal" href="#ptypy.core.geometry.Geo" title="ptypy.core.geometry.Geo"><em>Geo</em></a>) &#8211; Geometry class instance and attached propagator</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="ptypy.core.classes.POD.DEFAULT_VIEWS">
<code class="descname">DEFAULT_VIEWS</code><em class="property"> = {'exit': None, 'probe': None, 'obj': None, 'mask': None, 'diff': None}</em><a class="headerlink" href="#ptypy.core.classes.POD.DEFAULT_VIEWS" title="Permalink to this definition">¶</a></dt>
<dd><p>Default set of <a class="reference internal" href="#ptypy.core.classes.View" title="ptypy.core.classes.View"><code class="xref any py py-class docutils literal"><span class="pre">View</span></code></a>s used by a POD</p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.POD.active">
<code class="descname">active</code><a class="headerlink" href="#ptypy.core.classes.POD.active" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience property that describes whether this pod is active or not.
Equivalent to <code class="docutils literal"><span class="pre">self.di_view.active</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.POD.bw">
<code class="descname">bw</code><a class="headerlink" href="#ptypy.core.classes.POD.bw" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience property that returns backward propagator of attached
Geometry instance. Equivalent to <code class="docutils literal"><span class="pre">self.geometry.propagator.bw</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.POD.diff">
<code class="descname">diff</code><a class="headerlink" href="#ptypy.core.classes.POD.diff" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience property that links to slice of diffraction
<a class="reference internal" href="#ptypy.core.classes.Storage" title="ptypy.core.classes.Storage"><code class="xref any py py-class docutils literal"><span class="pre">Storage</span></code></a>. Equivalent to <code class="docutils literal"><span class="pre">self.di_view.data</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.POD.exit">
<code class="descname">exit</code><a class="headerlink" href="#ptypy.core.classes.POD.exit" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience property that links to slice of exit wave
<a class="reference internal" href="#ptypy.core.classes.Storage" title="ptypy.core.classes.Storage"><code class="xref any py py-class docutils literal"><span class="pre">Storage</span></code></a>. Equivalent to <code class="docutils literal"><span class="pre">self.pr_view.data</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.POD.fw">
<code class="descname">fw</code><a class="headerlink" href="#ptypy.core.classes.POD.fw" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience property that returns forward propagator of attached
Geometry instance. Equivalent to <code class="docutils literal"><span class="pre">self.geometry.propagator.fw</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.POD.geometry">
<code class="descname">geometry</code><em class="property"> = None</em><a class="headerlink" href="#ptypy.core.classes.POD.geometry" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#ptypy.core.geometry.Geo" title="ptypy.core.geometry.Geo"><code class="xref any py py-class docutils literal"><span class="pre">Geo</span></code></a> instance with propagators</p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.POD.mask">
<code class="descname">mask</code><a class="headerlink" href="#ptypy.core.classes.POD.mask" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience property that links to slice of masking
<a class="reference internal" href="#ptypy.core.classes.Storage" title="ptypy.core.classes.Storage"><code class="xref any py py-class docutils literal"><span class="pre">Storage</span></code></a>. Equivalent to <code class="docutils literal"><span class="pre">self.ma_view.data</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.POD.object">
<code class="descname">object</code><a class="headerlink" href="#ptypy.core.classes.POD.object" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience property that links to slice of object <a class="reference internal" href="#ptypy.core.classes.Storage" title="ptypy.core.classes.Storage"><code class="xref any py py-class docutils literal"><span class="pre">Storage</span></code></a>.
Usually equivalent to <code class="docutils literal"><span class="pre">self.ob_view.data</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.POD.pr_view">
<code class="descname">pr_view</code><em class="property"> = None</em><a class="headerlink" href="#ptypy.core.classes.POD.pr_view" title="Permalink to this definition">¶</a></dt>
<dd><p>A reference to the (pr)obe-view. (ob)ject-, (ma)sk- and
(di)ff-view are accessible in the same manner (<code class="docutils literal"><span class="pre">self.xx_view</span></code>).</p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.POD.probe">
<code class="descname">probe</code><a class="headerlink" href="#ptypy.core.classes.POD.probe" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience property that links to slice of probe <a class="reference internal" href="#ptypy.core.classes.Storage" title="ptypy.core.classes.Storage"><code class="xref any py py-class docutils literal"><span class="pre">Storage</span></code></a>.
Equivalent to <code class="docutils literal"><span class="pre">self.pr_view.data</span></code>.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ptypy.core.classes.Base">
<em class="property">class </em><code class="descclassname">ptypy.core.classes.</code><code class="descname">Base</code><span class="sig-paren">(</span><em>owner=None</em>, <em>ID=None</em>, <em>BeOwner=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.classes.Base" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Ptypy Base class to support some kind of hierarchy,
conversion to and from dictionaries as well as a &#8216;cross-node&#8217; ID
management of python objects</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>owner</strong> (<em>Other subclass of Base or Base</em>) &#8211; Owner gives IDs to other ptypy objects that refer to it
as owner. Owner also keeps a reference to these objects in
its internal _pool where objects are key-sorted according
to their ID prefix</li>
<li><strong>ID</strong> (<em>None, str or int</em>) &#8211; </li>
<li><strong>BeOwner</strong> (<em>bool</em>) &#8211; Set to <cite>False</cite> if this instance is not intended to own other
ptypy objects.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="ptypy.core.classes.Base.ID">
<code class="descname">ID</code><a class="headerlink" href="#ptypy.core.classes.Base.ID" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ptypy.core.classes.Base.calc_mem_usage">
<code class="descname">calc_mem_usage</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.classes.Base.calc_mem_usage" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.Base.numID">
<code class="descname">numID</code><a class="headerlink" href="#ptypy.core.classes.Base.numID" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ptypy.core.classes.Base.owner">
<code class="descname">owner</code><a class="headerlink" href="#ptypy.core.classes.Base.owner" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-ptypy.core.data">
<span id="ptypy-core-data-module"></span><h2>ptypy.core.data module<a class="headerlink" href="#module-ptypy.core.data" title="Permalink to this headline">¶</a></h2>
<p>data - Diffraction data access.</p>
<p>This module defines a PtyScan, a container to hold the experimental
data of a ptychography scan. Instrument-specific reduction routines should
inherit PtyScan to prepare data for the Ptycho Instance in a uniform format.</p>
<p>The experiment specific child class only needs to overwrite 2 functions
of the base class:</p>
<p>For the moment the module contains two main objects:
PtyScan, which holds a single ptychography scan, and DataSource, which
holds a collection of datascans and feeds the data as required.</p>
<p>This file is part of the PTYPY package.</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">copyright:</th><td class="field-body">Copyright 2014 by the PTYPY team, see AUTHORS.</td>
</tr>
<tr class="field-even field"><th class="field-name">license:</th><td class="field-body">GPLv2, see LICENSE for details.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="class">
<dt id="ptypy.core.data.PtyScan">
<em class="property">class </em><code class="descclassname">ptypy.core.data.</code><code class="descname">PtyScan</code><span class="sig-paren">(</span><em>pars=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.data.PtyScan" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>PtyScan: A single ptychography scan, created on the fly or read from file.</p>
<p><em>BASECLASS</em></p>
<dl class="docutils">
<dt>Objectives:</dt>
<dd><ul class="first last simple">
<li>Stand alone functionality</li>
<li>Can produce .ptyd data formats</li>
<li>Child instances should be able to prepare from raw data</li>
<li>On-the-fly support in form of chunked data.</li>
<li>mpi capable, child classes should not worry about mpi</li>
</ul>
</dd>
</dl>
<p>Default data parameters. See <code class="xref py py-data docutils literal"><span class="pre">scan.data</span></code></p>
<p>Class creation with minimum set of parameters, see <a class="reference internal" href="#ptypy.core.data.PtyScan.DEFAULT" title="ptypy.core.data.PtyScan.DEFAULT"><code class="xref py py-data docutils literal"><span class="pre">PtyScan.DEFAULT</span></code></a>
Please note that class creation is not meant to load data.</p>
<p>Call <a class="reference internal" href="#ptypy.core.data.PtyScan.initialize" title="ptypy.core.data.PtyScan.initialize"><code class="xref py py-data docutils literal"><span class="pre">initialize</span></code></a> to begin loading and data file creation.</p>
<dl class="attribute">
<dt id="ptypy.core.data.PtyScan.CODES">
<code class="descname">CODES</code><em class="property"> = {'msgEOS': 'End of scan reached', 'msg1': 'Scan unfinished. More frames available after a pause'}</em><a class="headerlink" href="#ptypy.core.data.PtyScan.CODES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ptypy.core.data.PtyScan.DEFAULT">
<code class="descname">DEFAULT</code><em class="property"> = Param({'auto_center': None, 'positions_theory': None, 'dfile': None, 'name': 'PtyScan', 'num_frames': None, 'min_frames': 1, 'center': 'fftshift', 'chunk_format': '.chunk%02d', 'label': None, 'experimentID': None, 'load_parallel': 'data', 'shape': 256, 'rebin': None, 'psize': 0.000172, 'version': 0.1, 'add_poisson_noise': True, 'save': None, 'distance': 7.19, 'energy': 7.2, 'orientation': None})</em><a class="headerlink" href="#ptypy.core.data.PtyScan.DEFAULT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ptypy.core.data.PtyScan.EOS">
<code class="descname">EOS</code><em class="property"> = 'msgEOS'</em><a class="headerlink" href="#ptypy.core.data.PtyScan.EOS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ptypy.core.data.PtyScan.METAKEYS">
<code class="descname">METAKEYS</code><em class="property"> = ['version', 'num_frames', 'label', 'shape', 'psize', 'energy', 'center', 'distance']</em><a class="headerlink" href="#ptypy.core.data.PtyScan.METAKEYS" title="Permalink to this definition">¶</a></dt>
<dd><p>Keys to store in meta param</p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.data.PtyScan.WAIT">
<code class="descname">WAIT</code><em class="property"> = 'msg1'</em><a class="headerlink" href="#ptypy.core.data.PtyScan.WAIT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ptypy.core.data.PtyScan.abort">
<code class="descname">abort</code><a class="headerlink" href="#ptypy.core.data.PtyScan.abort" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ptypy.core.data.PtyScan.auto">
<code class="descname">auto</code><span class="sig-paren">(</span><em>frames</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.data.PtyScan.auto" title="Permalink to this definition">¶</a></dt>
<dd><p>Repeated calls to this function will process the data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>frames</strong> (<em>int</em>) &#8211; Number of frames to process.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">one of the following
- WAIT, if scan&#8217;s end is not reached,<blockquote>
<div>but no data could be prepared yet</div></blockquote>
<ul class="simple">
<li>EOS, if scan&#8217;s end is reached</li>
<li>a data package otherwise</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">variable</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.data.PtyScan.check">
<code class="descname">check</code><span class="sig-paren">(</span><em>frames=None</em>, <em>start=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.data.PtyScan.check" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Override in subclass for custom implementation</strong></p>
<p>This method checks how many frames the preparation routine may
process, starting from frame <cite>start</cite> at a request of <cite>frames</cite>.</p>
<p>This method is supposed to return the number of accessible frames
for preparation and should determine if data acquisition for this
scan is finished. Its main purpose is to allow for a data
acquisition scheme, where the number of frames is not known
when <a class="reference internal" href="#ptypy.core.data.PtyScan" title="ptypy.core.data.PtyScan"><code class="xref py py-class docutils literal"><span class="pre">PtyScan</span></code></a> is constructed, i.e. a data stream or an
on-the-fly reconstructions.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If <a class="reference internal" href="#ptypy.core.data.PtyScan.num_frames" title="ptypy.core.data.PtyScan.num_frames"><code class="xref py py-data docutils literal"><span class="pre">num_frames</span></code></a> is set on <code class="docutils literal"><span class="pre">__init__()</span></code> of the subclass,
this method can be left as it is.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>frames</strong> (<em>int or None</em>) &#8211; Number of frames requested.</li>
<li><strong>start</strong> (<em>int or None</em>) &#8211; Scanpoint index to start checking from.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>frames_accessible</strong> (<em>int</em>) &#8211;
Number of frames readable.</li>
<li><strong>end_of_scan</strong> (<em>int or None</em>) &#8211;
is one of the following,
- 0, end of the scan is not reached
- 1, end of scan will be reached or is
- None, can&#8217;t say</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.data.PtyScan.correct">
<code class="descname">correct</code><span class="sig-paren">(</span><em>raw</em>, <em>weights</em>, <em>common</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.data.PtyScan.correct" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Override in subclass for custom implementation</strong></p>
<p>Place holder for dark and flatfield correction. If <a class="reference internal" href="#ptypy.core.data.PtyScan.load" title="ptypy.core.data.PtyScan.load"><code class="xref any py py-meth docutils literal"><span class="pre">load</span></code></a>
already provides data in the form of photon counts, and no frame
specific weight is needed, this method may be left as it is.</p>
<p>May get <em>merged</em> with <a class="reference internal" href="#ptypy.core.data.PtyScan.load" title="ptypy.core.data.PtyScan.load"><code class="xref any py py-meth docutils literal"><span class="pre">load</span></code></a> in future.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>data, weights</strong> &#8211;
Flat and dark-corrected data dictionaries. These dictionaries
must have the same keys as the input <cite>raw</cite> and contain
corrected frames (<cite>data</cite>) and statistical weights (<cite>weights</cite>)
which are zero for invalid or masked pixel other the number
of detector counts that correspond to one photon count</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">dict</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.data.PtyScan.end_of_scan">
<code class="descname">end_of_scan</code><a class="headerlink" href="#ptypy.core.data.PtyScan.end_of_scan" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ptypy.core.data.PtyScan.frames_accessible">
<code class="descname">frames_accessible</code><a class="headerlink" href="#ptypy.core.data.PtyScan.frames_accessible" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ptypy.core.data.PtyScan.get_data_chunk">
<code class="descname">get_data_chunk</code><span class="sig-paren">(</span><em>chunksize</em>, <em>start=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.data.PtyScan.get_data_chunk" title="Permalink to this definition">¶</a></dt>
<dd><p>This function prepares a container that is compatible to data package.</p>
<p>This function is called from the auto() function.</p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.data.PtyScan.info">
<code class="descname">info</code><em class="property"> = None</em><a class="headerlink" href="#ptypy.core.data.PtyScan.info" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="xref py py-class docutils literal"><span class="pre">Param</span></code> container that stores all input parameters.</p>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.data.PtyScan.initialize">
<code class="descname">initialize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.data.PtyScan.initialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Begins the Data preparation and intended as the first method
that does read-write access on (large) data. Does the following:</p>
<ul class="simple">
<li>Creates a *.ptyd data file at location specified by
<code class="xref py py-data docutils literal"><span class="pre">dfile</span></code> (master node only)</li>
<li>Calls <a class="reference internal" href="#ptypy.core.data.PtyScan.load_weight" title="ptypy.core.data.PtyScan.load_weight"><code class="xref py py-meth docutils literal"><span class="pre">load_weight()</span></code></a>, <a class="reference internal" href="#ptypy.core.data.PtyScan.load_positions" title="ptypy.core.data.PtyScan.load_positions"><code class="xref py py-meth docutils literal"><span class="pre">load_positions()</span></code></a>
<a class="reference internal" href="#ptypy.core.data.PtyScan.load_common" title="ptypy.core.data.PtyScan.load_common"><code class="xref py py-meth docutils literal"><span class="pre">load_common()</span></code></a> (master node only for
<code class="docutils literal"><span class="pre">load_parallel==None</span></code> or <code class="docutils literal"><span class="pre">load_parallel=='data'</span></code>)</li>
<li>Sets <a class="reference internal" href="#ptypy.core.data.PtyScan.num_frames" title="ptypy.core.data.PtyScan.num_frames"><code class="xref py py-attr docutils literal"><span class="pre">num_frames</span></code></a> if needed</li>
<li>Calls <a class="reference internal" href="#ptypy.core.data.PtyScan.post_initialize" title="ptypy.core.data.PtyScan.post_initialize"><code class="xref py py-meth docutils literal"><span class="pre">post_initialize()</span></code></a></li>
</ul>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.data.PtyScan.load">
<code class="descname">load</code><span class="sig-paren">(</span><em>indices</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.data.PtyScan.load" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Override in subclass for custom implementation</strong></p>
<p>Loads data according to node specific scanpoint indices that have
been determined by <code class="xref py py-class docutils literal"><span class="pre">LoadManager</span></code> or otherwise.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>raw, positions, weight</strong> &#8211;
Dictionaries whose keys are the given scan point <cite>indices</cite>
and whose values are the respective frame / position according
to the scan point index. <cite>weight</cite> and <cite>positions</cite> may be empty</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">dict</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This is the <em>most</em> important method to change when subclassing
<a class="reference internal" href="#ptypy.core.data.PtyScan" title="ptypy.core.data.PtyScan"><code class="xref py py-class docutils literal"><span class="pre">PtyScan</span></code></a>. Most often it suffices to override the constructor
and this method to create a subclass suited for a specific
experiment.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.data.PtyScan.load_common">
<code class="descname">load_common</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.data.PtyScan.load_common" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Override in subclass for custom implementation</strong></p>
<p><em>Called in</em> <a class="reference internal" href="#ptypy.core.data.PtyScan.initialize" title="ptypy.core.data.PtyScan.initialize"><code class="xref py py-meth docutils literal"><span class="pre">initialize()</span></code></a></p>
<p>Loads anything and stores that in a dict. This dict will be
available to all processes after <a class="reference internal" href="#ptypy.core.data.PtyScan.initialize" title="ptypy.core.data.PtyScan.initialize"><code class="xref py py-meth docutils literal"><span class="pre">initialize()</span></code></a> through
the attribute <code class="xref py py-attr docutils literal"><span class="pre">common</span></code></p>
<p>The purpose of this method is the same as <a class="reference internal" href="#ptypy.core.data.PtyScan.load_weight" title="ptypy.core.data.PtyScan.load_weight"><code class="xref py py-meth docutils literal"><span class="pre">load_weight()</span></code></a>
and <a class="reference internal" href="#ptypy.core.data.PtyScan.load_positions" title="ptypy.core.data.PtyScan.load_positions"><code class="xref py py-meth docutils literal"><span class="pre">load_positions()</span></code></a> except for that the contents
of <code class="xref py py-attr docutils literal"><span class="pre">common</span></code> have no built-in effect of the behavior in
the processing other than the user specifies it in py:meth:<cite>load</cite></p>
<p>If <cite>load_parallel</cite> is set to <cite>all</cite> or common`, this function is
executed by all nodes, otherwise the master node executes this
function and broadcasts the results to other nodes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>common</strong></td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">dict</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.data.PtyScan.load_positions">
<code class="descname">load_positions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.data.PtyScan.load_positions" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Override in subclass for custom implementation</strong></p>
<p><em>Called in</em> <a class="reference internal" href="#ptypy.core.data.PtyScan.initialize" title="ptypy.core.data.PtyScan.initialize"><code class="xref py py-meth docutils literal"><span class="pre">initialize()</span></code></a></p>
<p>Loads all positions for all diffraction patterns in this scan.
The positions loaded here will be available by all processes
through the attribute <code class="docutils literal"><span class="pre">self.positions</span></code>. If you specify position
on a per frame basis in <a class="reference internal" href="#ptypy.core.data.PtyScan.load" title="ptypy.core.data.PtyScan.load"><code class="xref py py-meth docutils literal"><span class="pre">load()</span></code></a> , this function has no
effect.</p>
<p>If theoretical positions <code class="xref py py-data docutils literal"><span class="pre">positions_theory</span></code> are
provided in the initial parameter set <a class="reference internal" href="#ptypy.core.data.PtyScan.DEFAULT" title="ptypy.core.data.PtyScan.DEFAULT"><code class="xref py py-data docutils literal"><span class="pre">DEFAULT</span></code></a>,
specifying positions here has NO effect and will be ignored.</p>
<p>The purpose of this function is to avoid reloading and parallel
reads on files that may require intense parsing to retrieve the
information, e.g. long SPEC log files. If parallel reads or
log file parsing for each set of frames is not a time critical
issue of the subclass, reimplementing this function can be ignored
and it is recommended to only reimplement the <a class="reference internal" href="#ptypy.core.data.PtyScan.load" title="ptypy.core.data.PtyScan.load"><code class="xref py py-meth docutils literal"><span class="pre">load()</span></code></a>
method.</p>
<p>If <cite>load_parallel</cite> is set to <cite>all</cite> or common`, this function is
executed by all nodes, otherwise the master node executes this
function and broadcasts the results to other nodes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>positions</strong> &#8211;
A (N,2)-array where <em>N</em> is the number of positions.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">ndarray</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Be aware that this method sets attribute <a class="reference internal" href="#ptypy.core.data.PtyScan.num_frames" title="ptypy.core.data.PtyScan.num_frames"><code class="xref py py-attr docutils literal"><span class="pre">num_frames</span></code></a>
in the following manner.</p>
<ul class="last simple">
<li>If <code class="docutils literal"><span class="pre">num_frames</span> <span class="pre">==</span> <span class="pre">None</span></code> : <code class="docutils literal"><span class="pre">num_frames</span> <span class="pre">=</span> <span class="pre">N</span></code>.</li>
<li>If <code class="docutils literal"><span class="pre">num_frames</span> <span class="pre">&lt;</span> <span class="pre">N</span></code> , no effect.</li>
<li>If <code class="docutils literal"><span class="pre">num_frames</span> <span class="pre">&gt;</span> <span class="pre">N</span></code> : <code class="docutils literal"><span class="pre">num_frames</span> <span class="pre">=</span> <span class="pre">N</span></code>.</li>
</ul>
</div>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.data.PtyScan.load_weight">
<code class="descname">load_weight</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.data.PtyScan.load_weight" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Override in subclass for custom implementation</strong></p>
<p><em>Called in</em> <a class="reference internal" href="#ptypy.core.data.PtyScan.initialize" title="ptypy.core.data.PtyScan.initialize"><code class="xref py py-meth docutils literal"><span class="pre">initialize()</span></code></a></p>
<p>Loads a common (2d)-weight for all diffraction patterns. The weight
loaded here will be available by all processes through the
attribute <code class="docutils literal"><span class="pre">self.weight2d</span></code>. If a <em>per-frame-weight</em> is specified
in <a class="reference internal" href="#ptypy.core.data.PtyScan.load" title="ptypy.core.data.PtyScan.load"><code class="xref py py-meth docutils literal"><span class="pre">load()</span></code></a> , this function has no effect.</p>
<p>The purpose of this function is to avoid reloading and parallel
reads. If that is not critical to the implementation,
reimplementing this function in a subclass can be ignored.</p>
<p>If <cite>load_parallel</cite> is set to <cite>all</cite> or common`, this function is
executed by all nodes, otherwise the master node executes this
function and broadcasts the results to other nodes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>weight2d</strong> &#8211;
A two-dimensional array with a shape compatible to the raw
diffraction data frames</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">ndarray</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For now, weights will be converted to a mask,
<code class="docutils literal"><span class="pre">mask</span> <span class="pre">=</span> <span class="pre">weight2d</span> <span class="pre">&gt;</span> <span class="pre">0</span></code> for use in reconstruction algorithms.
It is planned to use a general weight instead of a mask in future
releases.</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.data.PtyScan.min_frames">
<code class="descname">min_frames</code><em class="property"> = None</em><a class="headerlink" href="#ptypy.core.data.PtyScan.min_frames" title="Permalink to this definition">¶</a></dt>
<dd><p>Minimum number of frames to prepare / load
with call of <a class="reference internal" href="#ptypy.core.data.PtyScan.auto" title="ptypy.core.data.PtyScan.auto"><code class="xref py py-meth docutils literal"><span class="pre">auto()</span></code></a></p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.data.PtyScan.num_frames">
<code class="descname">num_frames</code><em class="property"> = None</em><a class="headerlink" href="#ptypy.core.data.PtyScan.num_frames" title="Permalink to this definition">¶</a></dt>
<dd><p>Total number of frames to prepare / load.
Set by <code class="xref py py-data docutils literal"><span class="pre">num_frames</span></code></p>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.data.PtyScan.post_initialize">
<code class="descname">post_initialize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.data.PtyScan.post_initialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Placeholder. Called at the end of <a class="reference internal" href="#ptypy.core.data.PtyScan.initialize" title="ptypy.core.data.PtyScan.initialize"><code class="xref py py-meth docutils literal"><span class="pre">initialize()</span></code></a> by all
processes.</p>
<p>Use this method to benefit from &#8216;hard-to-retrieve but now available&#8217;
information after initialize.</p>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.data.PtyScan.report">
<code class="descname">report</code><span class="sig-paren">(</span><em>what=None</em>, <em>shout=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.data.PtyScan.report" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a report on internal structure.</p>
</dd></dl>

</dd></dl>

<dl class="data">
<dt id="ptypy.core.data.PTYD">
<code class="descclassname">ptypy.core.data.</code><code class="descname">PTYD</code><em class="property"> = {'info': {}, 'chunks': {}, 'meta': {}}</em><a class="headerlink" href="#ptypy.core.data.PTYD" title="Permalink to this definition">¶</a></dt>
<dd><p>Basic Structure of a .ptyd datafile</p>
</dd></dl>

<dl class="class">
<dt id="ptypy.core.data.PtydScan">
<em class="property">class </em><code class="descclassname">ptypy.core.data.</code><code class="descname">PtydScan</code><span class="sig-paren">(</span><em>pars=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.data.PtydScan" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ptypy.core.data.PtyScan" title="ptypy.core.data.PtyScan"><code class="xref py py-class docutils literal"><span class="pre">ptypy.core.data.PtyScan</span></code></a></p>
<p>PtyScan provided by native &#8220;ptyd&#8221; file format.</p>
<p>PtyScan provided by native &#8220;ptyd&#8221; file format.</p>
<dl class="attribute">
<dt id="ptypy.core.data.PtydScan.DEFAULT">
<code class="descname">DEFAULT</code><em class="property"> = Param({'auto_center': None, 'positions_theory': None, 'dfile': None, 'name': 'PtydScan', 'num_frames': None, 'min_frames': 1, 'center': 'fftshift', 'chunk_format': '.chunk%02d', 'label': None, 'experimentID': None, 'load_parallel': 'data', 'source': 'file', 'shape': 256, 'rebin': None, 'psize': 0.000172, 'version': 0.1, 'add_poisson_noise': True, 'save': None, 'distance': 7.19, 'energy': 7.2, 'orientation': None})</em><a class="headerlink" href="#ptypy.core.data.PtydScan.DEFAULT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ptypy.core.data.PtydScan.check">
<code class="descname">check</code><span class="sig-paren">(</span><em>frames=None</em>, <em>start=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.data.PtydScan.check" title="Permalink to this definition">¶</a></dt>
<dd><p>Implementation of the check routine for a .ptyd file format.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#ptypy.core.data.PtyScan.check" title="ptypy.core.data.PtyScan.check"><code class="xref py py-meth docutils literal"><span class="pre">PtyScan.check()</span></code></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.data.PtydScan.load">
<code class="descname">load</code><span class="sig-paren">(</span><em>indices</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.data.PtydScan.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Load from ptyd.</p>
<p>Due to possible chunked data, slicing frames is non-trivial.</p>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.data.PtydScan.load_positions">
<code class="descname">load_positions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.data.PtydScan.load_positions" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ptypy.core.data.PtydScan.load_weight">
<code class="descname">load_weight</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.data.PtydScan.load_weight" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="ptypy.core.data.MoonFlowerScan">
<em class="property">class </em><code class="descclassname">ptypy.core.data.</code><code class="descname">MoonFlowerScan</code><span class="sig-paren">(</span><em>pars=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.data.MoonFlowerScan" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ptypy.core.data.PtyScan" title="ptypy.core.data.PtyScan"><code class="xref py py-class docutils literal"><span class="pre">ptypy.core.data.PtyScan</span></code></a></p>
<p>Test PtyScan class producing a romantic ptychographic data set of a moon
illuminating flowers.</p>
<p>Override parent class default:</p>
<p>Parent pars are for the</p>
<dl class="attribute">
<dt id="ptypy.core.data.MoonFlowerScan.DEFAULT">
<code class="descname">DEFAULT</code><em class="property"> = Param({'auto_center': None, 'positions_theory': None, 'min_frames': 1, 'orientation': None, 'num_frames': 100, 'energy': 7.2, 'shape': 128, 'chunk_format': '.chunk%02d', 'rebin': None, 'density': 0.2, 'photons': 100000000.0, 'experimentID': None, 'label': None, 'version': 0.1, 'dfile': None, 'psf': 0.0, 'psize': 0.000172, 'load_parallel': 'data', 'center': 'fftshift', 'distance': 7.19, 'save': None, 'name': 'MoonFlowerScan', 'add_poisson_noise': True, 'model': 'round'})</em><a class="headerlink" href="#ptypy.core.data.MoonFlowerScan.DEFAULT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ptypy.core.data.MoonFlowerScan.load">
<code class="descname">load</code><span class="sig-paren">(</span><em>indices</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.data.MoonFlowerScan.load" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ptypy.core.data.MoonFlowerScan.load_positions">
<code class="descname">load_positions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.data.MoonFlowerScan.load_positions" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ptypy.core.data.MoonFlowerScan.load_weight">
<code class="descname">load_weight</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.data.MoonFlowerScan.load_weight" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-ptypy.core.geometry">
<span id="ptypy-core-geometry-module"></span><h2>ptypy.core.geometry module<a class="headerlink" href="#module-ptypy.core.geometry" title="Permalink to this headline">¶</a></h2>
<p>Geometry manager.</p>
<p>This file is part of the PTYPY package.</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">copyright:</th><td class="field-body">Copyright 2014 by the PTYPY team, see AUTHORS.</td>
</tr>
<tr class="field-even field"><th class="field-name">license:</th><td class="field-body">GPLv2, see LICENSE for details.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="class">
<dt id="ptypy.core.geometry.Geo">
<em class="property">class </em><code class="descclassname">ptypy.core.geometry.</code><code class="descname">Geo</code><span class="sig-paren">(</span><em>owner=None</em>, <em>ID=None</em>, <em>pars=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.geometry.Geo" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ptypy.core.classes.Base" title="ptypy.core.classes.Base"><code class="xref py py-class docutils literal"><span class="pre">ptypy.core.classes.Base</span></code></a></p>
<p>Hold and keep consistent the information about experimental parameters.</p>
<p>Keeps also reference to the Propagator and updates this reference
when resolution, pixel size, etc. is changed in <cite>Geo</cite>. Reference to
<code class="xref py py-data docutils literal"><span class="pre">io.paths.recons</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Variables:</th><td class="field-body"><strong>interact</strong> (<em>bool (True)</em>) &#8211; If set to True, changes to properties like <a class="reference internal" href="#ptypy.core.geometry.Geo.energy" title="ptypy.core.geometry.Geo.energy"><code class="xref py py-meth docutils literal"><span class="pre">energy()</span></code></a>,
<a class="reference internal" href="#ptypy.core.geometry.Geo.lam" title="ptypy.core.geometry.Geo.lam"><code class="xref py py-meth docutils literal"><span class="pre">lam()</span></code></a>, <a class="reference internal" href="#ptypy.core.geometry.Geo.shape" title="ptypy.core.geometry.Geo.shape"><code class="xref py py-meth docutils literal"><span class="pre">shape()</span></code></a> or <a class="reference internal" href="#ptypy.core.geometry.Geo.psize" title="ptypy.core.geometry.Geo.psize"><code class="xref py py-meth docutils literal"><span class="pre">psize()</span></code></a> will cause
a call to <a class="reference internal" href="#ptypy.core.geometry.Geo.update" title="ptypy.core.geometry.Geo.update"><code class="xref py py-meth docutils literal"><span class="pre">update()</span></code></a>.</td>
</tr>
</tbody>
</table>
<p>Default geometry parameters. See also <code class="xref py py-data docutils literal"><span class="pre">scan.geometry</span></code></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>owner</strong> (<em>Base or subclass</em>) &#8211; Instance of a subclass of <a class="reference internal" href="#ptypy.core.classes.Base" title="ptypy.core.classes.Base"><code class="xref any py py-class docutils literal"><span class="pre">Base</span></code></a> or None. That is usually
<a class="reference internal" href="#ptypy.core.ptycho.Ptycho" title="ptypy.core.ptycho.Ptycho"><code class="xref any py py-class docutils literal"><span class="pre">Ptycho</span></code></a> for a Geo instance.</li>
<li><strong>ID</strong> (<em>str or int</em>) &#8211; Identifier. Use <code class="docutils literal"><span class="pre">ID=None</span></code> for automatic ID assignment.</li>
<li><strong>pars</strong> (<em>dict or Param</em>) &#8211; The configuration parameters. See <cite>Geo.DEFAULT</cite>.
Any other kwarg will update internal p dictionary
if the key exists in <cite>Geo.DEFAULT</cite>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="ptypy.core.geometry.Geo.DEFAULT">
<code class="descname">DEFAULT</code><em class="property"> = Param({'origin': 'fftshift', 'lam': None, 'center': 'fftshift', 'distance': 7.19, 'energy': 6.2, 'psize': 0.000172, 'propagation': 'farfield', 'shape': 256, 'misfit': 0.0, 'resolution': None})</em><a class="headerlink" href="#ptypy.core.geometry.Geo.DEFAULT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ptypy.core.geometry.Geo.distance">
<code class="descname">distance</code><a class="headerlink" href="#ptypy.core.geometry.Geo.distance" title="Permalink to this definition">¶</a></dt>
<dd><p>Propagation distance in meters</p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.geometry.Geo.energy">
<code class="descname">energy</code><a class="headerlink" href="#ptypy.core.geometry.Geo.energy" title="Permalink to this definition">¶</a></dt>
<dd><p>Property to get and set the energy</p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.geometry.Geo.lam">
<code class="descname">lam</code><a class="headerlink" href="#ptypy.core.geometry.Geo.lam" title="Permalink to this definition">¶</a></dt>
<dd><p>Property to get and set the wavelength</p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.geometry.Geo.lz">
<code class="descname">lz</code><a class="headerlink" href="#ptypy.core.geometry.Geo.lz" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves product of wavelength and propagation distance</p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.geometry.Geo.propagator">
<code class="descname">propagator</code><a class="headerlink" href="#ptypy.core.geometry.Geo.propagator" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves propagator, creates propagator instance if necessary.</p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.geometry.Geo.psize">
<code class="descname">psize</code><a class="headerlink" href="#ptypy.core.geometry.Geo.psize" title="Permalink to this definition">¶</a></dt>
<dd><p>Property to get and set the pixel size in the propagated plane</p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.geometry.Geo.resolution">
<code class="descname">resolution</code><a class="headerlink" href="#ptypy.core.geometry.Geo.resolution" title="Permalink to this definition">¶</a></dt>
<dd><p>Property to get and set the pixel size in source plane</p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.geometry.Geo.shape">
<code class="descname">shape</code><a class="headerlink" href="#ptypy.core.geometry.Geo.shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Property to get and set the <em>shape</em> i.e. the frame dimensions</p>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.geometry.Geo.update">
<code class="descname">update</code><span class="sig-paren">(</span><em>update_propagator=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.geometry.Geo.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the internal pixel sizes, giving precedence to the sample
pixel size (resolution) if self.psize_is_fixed is True.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ptypy.core.geometry.BasicNearfieldPropagator">
<em class="property">class </em><code class="descclassname">ptypy.core.geometry.</code><code class="descname">BasicNearfieldPropagator</code><span class="sig-paren">(</span><em>geo_pars=None</em>, <em>ffttype='fftw'</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.geometry.BasicNearfieldPropagator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Basic two step (i.e. two ffts) Nearfield Propagator.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>geo_pars</strong> (<em>Param or dict</em>) &#8211; Parameter dictionary as in <code class="xref py py-data docutils literal"><span class="pre">DEFAULT</span></code>.</li>
<li><strong>ffttype</strong> (<em>str or tuple</em>) &#8211; <p>Type of FFT implementation. One of:</p>
<ul>
<li>&#8216;fftw&#8217; for pyFFTW</li>
<li>&#8216;numpy&#8217; for numpy.fft.fft2</li>
<li>&#8216;scipy&#8217; for scipy.fft.fft2</li>
<li>2 or 4-tuple of (forward_fft2(),inverse_fft2(),
[scaling,inverse_scaling])</li>
</ul>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="ptypy.core.geometry.BasicNearfieldPropagator.bw">
<code class="descname">bw</code><span class="sig-paren">(</span><em>W</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.geometry.BasicNearfieldPropagator.bw" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes backward propagated wavefront of input wavefront W.</p>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.geometry.BasicNearfieldPropagator.fw">
<code class="descname">fw</code><span class="sig-paren">(</span><em>W</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.geometry.BasicNearfieldPropagator.fw" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes forward propagated wavefront of input wavefront W.</p>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.geometry.BasicNearfieldPropagator.update">
<code class="descname">update</code><span class="sig-paren">(</span><em>geo_pars=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.geometry.BasicNearfieldPropagator.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update internal p dictionary. Recompute all internal array buffers.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ptypy.core.geometry.BasicFarfieldPropagator">
<em class="property">class </em><code class="descclassname">ptypy.core.geometry.</code><code class="descname">BasicFarfieldPropagator</code><span class="sig-paren">(</span><em>geo_pars=None</em>, <em>ffttype='fftw'</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.geometry.BasicFarfieldPropagator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Basic single step Farfield Propagator.</p>
<p>Includes quadratic phase factors and arbitrary origin in array.</p>
<p>Be aware though, that if the origin is not in the center of the frame,
coordinates are rolled periodically, just like in the conventional fft case.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>geo_pars</strong> (<em>Param or dict</em>) &#8211; Parameter dictionary as in <code class="xref py py-attr docutils literal"><span class="pre">DEFAULT</span></code>.</li>
<li><strong>ffttype</strong> (<em>str or tuple</em>) &#8211; <p>Type of FFT implementation. One of:</p>
<ul>
<li>&#8216;fftw&#8217; for pyFFTW</li>
<li>&#8216;numpy&#8217; for numpy.fft.fft2</li>
<li>&#8216;scipy&#8217; for scipy.fft.fft2</li>
<li>2 or 4-tuple of (forward_fft2(), inverse_fft2(),
[scaling, inverse_scaling])</li>
</ul>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="ptypy.core.geometry.BasicFarfieldPropagator.bw">
<code class="descname">bw</code><span class="sig-paren">(</span><em>W</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.geometry.BasicFarfieldPropagator.bw" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes backward propagated wavefront of input wavefront W.</p>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.geometry.BasicFarfieldPropagator.fw">
<code class="descname">fw</code><span class="sig-paren">(</span><em>W</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.geometry.BasicFarfieldPropagator.fw" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes forward propagated wavefront of input wavefront W.</p>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.geometry.BasicFarfieldPropagator.update">
<code class="descname">update</code><span class="sig-paren">(</span><em>geo_pars=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.geometry.BasicFarfieldPropagator.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update internal p dictionary. Recompute all internal array buffers.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-ptypy.core.illumination">
<span id="ptypy-core-illumination-module"></span><h2>ptypy.core.illumination module<a class="headerlink" href="#module-ptypy.core.illumination" title="Permalink to this headline">¶</a></h2>
<p>This module generates the probe.</p>
<p>&#64;author: Bjoern Enders</p>
<p>This file is part of the PTYPY package.</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">copyright:</th><td class="field-body">Copyright 2014 by the PTYPY team, see AUTHORS.</td>
</tr>
<tr class="field-even field"><th class="field-name">license:</th><td class="field-body">GPLv2, see LICENSE for details.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="function">
<dt id="ptypy.core.illumination.init_storage">
<code class="descclassname">ptypy.core.illumination.</code><code class="descname">init_storage</code><span class="sig-paren">(</span><em>storage</em>, <em>pars</em>, <em>energy=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.illumination.init_storage" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes <a class="reference internal" href="#ptypy.core.classes.Storage" title="ptypy.core.classes.Storage"><code class="xref any py py-class docutils literal"><span class="pre">Storage</span></code></a> <cite>storage</cite> with parameters from <cite>pars</cite></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>storage</strong> (<a class="reference internal" href="#ptypy.core.classes.Storage" title="ptypy.core.classes.Storage"><em>Storage</em></a>) &#8211; A <a class="reference internal" href="#ptypy.core.classes.Storage" title="ptypy.core.classes.Storage"><code class="xref any py py-class docutils literal"><span class="pre">Storage</span></code></a> instance in the <em>probe</em> container of <a class="reference internal" href="#ptypy.core.ptycho.Ptycho" title="ptypy.core.ptycho.Ptycho"><code class="xref any py py-class docutils literal"><span class="pre">Ptycho</span></code></a></li>
<li><strong>pars</strong> (<a class="reference internal" href="ptypy.utils.html#ptypy.utils.parameters.Param" title="ptypy.utils.parameters.Param"><em>Param</em></a>) &#8211; <p>Parameter structure for creating a probe / illumination.
See <code class="xref py py-data docutils literal"><span class="pre">DEFAULT</span></code>
Also accepted as argument:</p>
<blockquote>
<div><ul>
<li>string giving the filename of a previous reconstruction to
extract storage from.</li>
<li>string giving the name of an available TEMPLATE</li>
<li>FIXME: document other string cases.</li>
<li>numpy array: interpreted as initial illumination.</li>
</ul>
</div></blockquote>
</li>
<li><strong>energy</strong> (<em>float, optional</em>) &#8211; Energy associated with this storage. If None, tries to retrieve
the energy from the already initialized ptypy network.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="ptypy.core.illumination.aperture">
<code class="descclassname">ptypy.core.illumination.</code><code class="descname">aperture</code><span class="sig-paren">(</span><em>A</em>, <em>grids=None</em>, <em>pars=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.illumination.aperture" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an aperture in the shape and dtype of <cite>A</cite> according
to x,y-grids <cite>grids</cite>. Keyword Arguments may be any of
(<em>FIXME</em> link to kwargs)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>A</strong> (<em>ndarray</em>) &#8211; Model array (at least 2-dimensional) to place aperture on top.</li>
<li><strong>pars</strong> (<em>dict or ~ptypy.utils.Param</em>) &#8211; Parameters, <em>FIXME</em> link to parameters</li>
<li><strong>grids</strong> (<em>ndarray</em>) &#8211; Cartesian coordinate grids, if None, they will be created with
<code class="docutils literal"><span class="pre">grids</span> <span class="pre">=</span> <span class="pre">u.grids(sh[-2:],</span> <span class="pre">psize=(1.0,</span> <span class="pre">1.0))</span></code></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>ap</strong> &#8211;
Aperture array (complex) in shape of A</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">ndarray</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-ptypy.core.manager">
<span id="ptypy-core-manager-module"></span><h2>ptypy.core.manager module<a class="headerlink" href="#module-ptypy.core.manager" title="Permalink to this headline">¶</a></h2>
<p>Scan management.</p>
<p>The main task of this module is to prepare the data structure for
reconstruction, taking a data feed and connecting individual diffraction
measurements to the other containers. The way this connection is done
is defined by ScanModel and its subclasses. The connections are
described by the POD objects.</p>
<p>This file is part of the PTYPY package.</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">copyright:</th><td class="field-body">Copyright 2014 by the PTYPY team, see AUTHORS.</td>
</tr>
<tr class="field-even field"><th class="field-name">license:</th><td class="field-body">GPLv2, see LICENSE for details.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="class">
<dt id="ptypy.core.manager.ModelManager">
<em class="property">class </em><code class="descclassname">ptypy.core.manager.</code><code class="descname">ModelManager</code><span class="sig-paren">(</span><em>ptycho</em>, <em>pars</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.manager.ModelManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Thin wrapper class which now just interfaces Ptycho with ScanModel.
This should probably all be done directly in Ptycho.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>ptycho</strong> (<a class="reference internal" href="#ptypy.core.ptycho.Ptycho" title="ptypy.core.ptycho.Ptycho"><em>Ptycho</em></a>) &#8211; The parent Ptycho object</li>
<li><strong>pars</strong> (<em>dict or Param</em>) &#8211; The .scans tree of the <a class="reference internal" href="#ptypy.core.ptycho.Ptycho" title="ptypy.core.ptycho.Ptycho"><code class="xref any py py-class docutils literal"><span class="pre">Ptycho</span></code></a> parameters.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="ptypy.core.manager.ModelManager.data_available">
<code class="descname">data_available</code><a class="headerlink" href="#ptypy.core.manager.ModelManager.data_available" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ptypy.core.manager.ModelManager.new_data">
<code class="descname">new_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.manager.ModelManager.new_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all new diffraction patterns and create all views and pods
accordingly.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ptypy.core.manager.ScanModel">
<em class="property">class </em><code class="descclassname">ptypy.core.manager.</code><code class="descname">ScanModel</code><span class="sig-paren">(</span><em>ptycho=None</em>, <em>pars=None</em>, <em>label=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.manager.ScanModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Abstract base class for models. Override at least these methods:
_create_pods(self)
_initialize_geo(self, common)
_initialize_probe(self, probe_ids)
_initialize_object(self, object_ids)</p>
<p>Create scan model object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>pars</strong> (<em>dict or Param</em>) &#8211; Input parameter tree.</li>
<li><strong>ptycho</strong> (<em>Ptycho instance</em>) &#8211; Ptycho instance to which this scan belongs</li>
<li><strong>label</strong> (<em>str</em>) &#8211; Unique label</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="ptypy.core.manager.ScanModel.DEFAULT">
<code class="descname">DEFAULT</code><em class="property"> = Param({'sample': Param({}), 'propagation': 'farfield', 'illumination': Param({}), 'tags': ['dummy']})</em><a class="headerlink" href="#ptypy.core.manager.ScanModel.DEFAULT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="ptypy.core.manager.ScanModel.makePtyScan">
<em class="property">classmethod </em><code class="descname">makePtyScan</code><span class="sig-paren">(</span><em>pars</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.manager.ScanModel.makePtyScan" title="Permalink to this definition">¶</a></dt>
<dd><p>Factory for PtyScan object. Return an instance of the appropriate PtyScan
subclass based on the input parameters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pars</strong> (<em>dict or Param</em>) &#8211; Input parameters according to <code class="xref py py-data docutils literal"><span class="pre">scan.data</span></code>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.manager.ScanModel.new_data">
<code class="descname">new_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.manager.ScanModel.new_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Feed data from ptyscan object.
:return: None if no data is available, True otherwise.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ptypy.core.manager.Full">
<em class="property">class </em><code class="descclassname">ptypy.core.manager.</code><code class="descname">Full</code><span class="sig-paren">(</span><em>ptycho=None</em>, <em>pars=None</em>, <em>label=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.manager.Full" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ptypy.core.manager.ScanModel" title="ptypy.core.manager.ScanModel"><code class="xref py py-class docutils literal"><span class="pre">ptypy.core.manager.ScanModel</span></code></a></p>
<p>Manage a single scan model (sharing, coherence, propagation, ...)</p>
<p>Create scan model object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>pars</strong> (<em>dict or Param</em>) &#8211; Input parameter tree.</li>
<li><strong>ptycho</strong> (<em>Ptycho instance</em>) &#8211; Ptycho instance to which this scan belongs</li>
<li><strong>label</strong> (<em>str</em>) &#8211; Unique label</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="ptypy.core.manager.Full.DEFAULT">
<code class="descname">DEFAULT</code><em class="property"> = Param({'name': 'Full', 'tags': ['dummy'], 'coherence': Param({'object_dispersion': None, 'energies': [1.0], 'spectrum': [1.0], 'num_object_modes': 1, 'num_probe_modes': 1, 'probe_dispersion': None}), 'sample': Param({'diversity': Param({'shift': None, 'noise': None, 'power': 0.1}), 'recon': Param({'rfile': '\\*.ptyr'}), 'process': Param({'density': 1, 'offset': (0, 0), 'zoom': None, 'thickness': 1e-06, 'ref_index': (0.5, 0.0), 'formula': None, 'smoothing': 2}), 'stxm': Param({'label': None}), 'model': None, 'fill': 1}), 'propagation': 'farfield', 'illumination': Param({'diversity': Param({'shift': None, 'noise': (0.5, 1.0), 'power': 0.1}), 'recon': Param({'rfile': '\\*.ptyr', 'label': None}), 'photons': None, 'propagation': Param({'antialiasing': 1, 'focussed': None, 'parallel': None, 'spot_size': None}), 'aperture': Param({'rotate': 0.0, 'form': 'circ', 'central_stop': None, 'edge': 2.0, 'diffuser': None, 'offset': 0.0, 'size': None}), 'model': None})})</em><a class="headerlink" href="#ptypy.core.manager.Full.DEFAULT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="ptypy.core.manager.Vanilla">
<em class="property">class </em><code class="descclassname">ptypy.core.manager.</code><code class="descname">Vanilla</code><span class="sig-paren">(</span><em>ptycho=None</em>, <em>pars=None</em>, <em>label=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.manager.Vanilla" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ptypy.core.manager.ScanModel" title="ptypy.core.manager.ScanModel"><code class="xref py py-class docutils literal"><span class="pre">ptypy.core.manager.ScanModel</span></code></a></p>
<p>Dummy for testing, there must be more than one for validate to react
to invalid names.</p>
<p>Create scan model object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>pars</strong> (<em>dict or Param</em>) &#8211; Input parameter tree.</li>
<li><strong>ptycho</strong> (<em>Ptycho instance</em>) &#8211; Ptycho instance to which this scan belongs</li>
<li><strong>label</strong> (<em>str</em>) &#8211; Unique label</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="ptypy.core.manager.Vanilla.DEFAULT">
<code class="descname">DEFAULT</code><em class="property"> = Param({'sample': Param({'fill': 1}), 'propagation': 'farfield', 'illumination': Param({'size': None}), 'name': 'Vanilla', 'tags': ['dummy']})</em><a class="headerlink" href="#ptypy.core.manager.Vanilla.DEFAULT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="ptypy.core.manager.Bragg3dModel">
<em class="property">class </em><code class="descclassname">ptypy.core.manager.</code><code class="descname">Bragg3dModel</code><span class="sig-paren">(</span><em>ptycho=None</em>, <em>pars=None</em>, <em>label=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.manager.Bragg3dModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ptypy.core.manager.Vanilla" title="ptypy.core.manager.Vanilla"><code class="xref py py-class docutils literal"><span class="pre">ptypy.core.manager.Vanilla</span></code></a></p>
<p>Model for 3D Bragg ptycho data, where a set of rocking angles are
measured for each scanning position. The result is pods carrying
3D diffraction patterns and 3D Views into a 3D object.</p>
<p>Inherits from Vanilla because _create_pods and the object init
is identical.</p>
<p>Frames for each position are assembled according to the actual
xyz data, so it will not work if two acquisitions are done at the
same position.</p>
<dl class="attribute">
<dt id="ptypy.core.manager.Bragg3dModel.DEFAULT">
<code class="descname">DEFAULT</code><em class="property"> = Param({'sample': Param({'fill': 1}), 'illumination': Param({'recon': Param({'rfile': '\\*.ptyr', 'label': None}), 'photons': None, 'propagation': Param({'antialiasing': 1, 'focussed': None, 'parallel': None, 'spot_size': None}), 'aperture': Param({'rotate': 0.0, 'form': 'circ', 'central_stop': None, 'edge': 2.0, 'diffuser': None, 'offset': 0.0, 'size': None}), 'model': None, 'size': None}), 'propagation': 'farfield', 'name': 'Bragg3dModel', 'tags': ['dummy']})</em><a class="headerlink" href="#ptypy.core.manager.Bragg3dModel.DEFAULT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-ptypy.core.paths">
<span id="ptypy-core-paths-module"></span><h2>ptypy.core.paths module<a class="headerlink" href="#module-ptypy.core.paths" title="Permalink to this headline">¶</a></h2>
<p>Path manager.</p>
<p>This file is part of the PTYPY package.</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">copyright:</th><td class="field-body">Copyright 2014 by the PTYPY team, see AUTHORS.</td>
</tr>
<tr class="field-even field"><th class="field-name">license:</th><td class="field-body">GPLv2, see LICENSE for details.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="data">
<dt id="ptypy.core.paths.DEFAULT">
<code class="descclassname">ptypy.core.paths.</code><code class="descname">DEFAULT</code><em class="property"> = Param({'recon': 'recons/%(run)s/%(run)s_%(engine)s.ptyr', 'autoplot': 'plots/%(run)s/%(run)s_%(engine)s_%(iteration)04d.png', 'autosave': 'dumps/%(run)s/%(run)s_%(engine)s_%(iteration)04d.ptyr', 'home': './'})</em><a class="headerlink" href="#ptypy.core.paths.DEFAULT" title="Permalink to this definition">¶</a></dt>
<dd><p>Default path parameters. See <code class="xref py py-data docutils literal"><span class="pre">io.paths</span></code>
and a short listing below</p>
</dd></dl>

<dl class="class">
<dt id="ptypy.core.paths.Paths">
<em class="property">class </em><code class="descclassname">ptypy.core.paths.</code><code class="descname">Paths</code><span class="sig-paren">(</span><em>io=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.paths.Paths" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Path managing class</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>io</strong> (<em>Param or dict</em>) &#8211; Parameter set to pick path info from. See <a class="reference internal" href="parameters.html#ptycho.io" title="ptycho.io"><code class="xref py py-data docutils literal"><span class="pre">io</span></code></a></td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="ptypy.core.paths.Paths.DEFAULT">
<code class="descname">DEFAULT</code><em class="property"> = Param({'recon': 'recons/%(run)s/%(run)s_%(engine)s.ptyr', 'autoplot': 'plots/%(run)s/%(run)s_%(engine)s_%(iteration)04d.png', 'autosave': 'dumps/%(run)s/%(run)s_%(engine)s_%(iteration)04d.ptyr', 'home': './'})</em><a class="headerlink" href="#ptypy.core.paths.Paths.DEFAULT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ptypy.core.paths.Paths.auto_file">
<code class="descname">auto_file</code><span class="sig-paren">(</span><em>runtime=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.paths.Paths.auto_file" title="Permalink to this definition">¶</a></dt>
<dd><p>File path for autosave file</p>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.paths.Paths.get_path">
<code class="descname">get_path</code><span class="sig-paren">(</span><em>path</em>, <em>runtime</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.paths.Paths.get_path" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ptypy.core.paths.Paths.plot_file">
<code class="descname">plot_file</code><span class="sig-paren">(</span><em>runtime=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.paths.Paths.plot_file" title="Permalink to this definition">¶</a></dt>
<dd><p>File path for plot file</p>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.paths.Paths.recon_file">
<code class="descname">recon_file</code><span class="sig-paren">(</span><em>runtime=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.paths.Paths.recon_file" title="Permalink to this definition">¶</a></dt>
<dd><p>File path for reconstruction file</p>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.paths.Paths.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>run</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.paths.Paths.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine run name</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-ptypy.core.ptycho">
<span id="ptypy-core-ptycho-module"></span><h2>ptypy.core.ptycho module<a class="headerlink" href="#module-ptypy.core.ptycho" title="Permalink to this headline">¶</a></h2>
<p>ptycho - definition of the upper-level class Ptycho.</p>
<p>This file is part of the PTYPY package.</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">copyright:</th><td class="field-body">Copyright 2014 by the PTYPY team, see AUTHORS.</td>
</tr>
<tr class="field-even field"><th class="field-name">license:</th><td class="field-body">GPLv2, see LICENSE for details.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="class">
<dt id="ptypy.core.ptycho.Ptycho">
<em class="property">class </em><code class="descclassname">ptypy.core.ptycho.</code><code class="descname">Ptycho</code><span class="sig-paren">(</span><em>pars=None</em>, <em>level=2</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.ptycho.Ptycho" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ptypy.core.classes.Base" title="ptypy.core.classes.Base"><code class="xref py py-class docutils literal"><span class="pre">ptypy.core.classes.Base</span></code></a></p>
<p>Ptycho : A ptychographic data holder and reconstruction manager.</p>
<p>This is the highest level class. It organizes and contains the data,
manages the reconstruction engines, and interacts with the outside world.</p>
<p>If MPI is enabled, this class acts both as a manager (rank = 0) and
a worker (any rank), and most information exists on all processes.
In its original design, the only part that is divided between processes is the
diffraction data.</p>
<p>By default Ptycho is instantiated once per process, but it can also
be used as a managed container to load past runs.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Variables:</th><td class="field-body"><ul class="first simple">
<li><strong>CType,FType</strong> (<em>numpy.dtype</em>) &#8211; numpy dtype for arrays. <cite>FType</cite> is for data, i.e. real-valued
arrays, <cite>CType</cite> is for complex-valued arrays</li>
<li><strong>interactor</strong> (<a class="reference internal" href="ptypy.io.html#ptypy.io.interaction.Server" title="ptypy.io.interaction.Server"><em>ptypy.io.interaction.Server</em></a>) &#8211; ZeroMQ interaction server for communication with e.g. plotting
clients</li>
<li><strong>runtime</strong> (<a class="reference internal" href="ptypy.utils.html#ptypy.utils.parameters.Param" title="ptypy.utils.parameters.Param"><em>Param</em></a>) &#8211; Runtime information, e.g. errors, iteration etc.</li>
<li><strong>model</strong> (<a class="reference internal" href="#ptypy.core.manager.ModelManager" title="ptypy.core.manager.ModelManager"><em>ModelManager</em></a>) &#8211; THE managing instance for <a class="reference internal" href="#ptypy.core.classes.POD" title="ptypy.core.classes.POD"><code class="xref any py py-class docutils literal"><span class="pre">POD</span></code></a>, <a class="reference internal" href="#ptypy.core.classes.View" title="ptypy.core.classes.View"><code class="xref any py py-class docutils literal"><span class="pre">View</span></code></a> and
<a class="reference internal" href="#ptypy.core.geometry.Geo" title="ptypy.core.geometry.Geo"><code class="xref any py py-class docutils literal"><span class="pre">Geo</span></code></a> instances</li>
<li><strong>mask</strong> (<em>probe,</em>) &#8211; Container instances for illuminations, samples, exit waves,
diffraction data and detector masks / weights</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>pars</strong> (<a class="reference internal" href="ptypy.utils.html#ptypy.utils.parameters.Param" title="ptypy.utils.parameters.Param"><em>Param</em></a>) &#8211; Input parameters, subset of the
<a class="reference internal" href="parameters.html#parameters"><span>ptypy parameter tree</span></a></li>
<li><strong>level</strong> (<em>int</em>) &#8211; <p>Determines how much is initialized.</p>
<ul>
<li>&lt;= 0 : empty ptypy structure</li>
<li><dl class="first docutils">
<dt>1 <span class="classifier-delimiter">:</span> <span class="classifier">reads parameters, configures interaction server,</span></dt>
<dd>see <a class="reference internal" href="#ptypy.core.ptycho.Ptycho.init_structures" title="ptypy.core.ptycho.Ptycho.init_structures"><code class="xref py py-meth docutils literal"><span class="pre">init_structures()</span></code></a></dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>2 <span class="classifier-delimiter">:</span> <span class="classifier">also configures Containers, initializes ModelManager</span></dt>
<dd>see <a class="reference internal" href="#ptypy.core.ptycho.Ptycho.init_data" title="ptypy.core.ptycho.Ptycho.init_data"><code class="xref py py-meth docutils literal"><span class="pre">init_data()</span></code></a></dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>3 <span class="classifier-delimiter">:</span> <span class="classifier">also initializes ZeroMQ-communication</span></dt>
<dd>see <a class="reference internal" href="#ptypy.core.ptycho.Ptycho.init_communication" title="ptypy.core.ptycho.Ptycho.init_communication"><code class="xref py py-meth docutils literal"><span class="pre">init_communication()</span></code></a></dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>4 <span class="classifier-delimiter">:</span> <span class="classifier">also initializes reconstruction engines,</span></dt>
<dd>see <a class="reference internal" href="#ptypy.core.ptycho.Ptycho.init_engine" title="ptypy.core.ptycho.Ptycho.init_engine"><code class="xref py py-meth docutils literal"><span class="pre">init_engine()</span></code></a></dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>&gt;= 4 <span class="classifier-delimiter">:</span> <span class="classifier">also and starts reconstruction</span></dt>
<dd>see <a class="reference internal" href="#ptypy.core.ptycho.Ptycho.run" title="ptypy.core.ptycho.Ptycho.run"><code class="xref py py-meth docutils literal"><span class="pre">run()</span></code></a></dd>
</dl>
</li>
</ul>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="ptypy.core.ptycho.Ptycho.DEFAULT">
<code class="descname">DEFAULT</code><em class="property"> = Param({'engines': Param({}), 'run': None, 'data_type': 'single', 'dry_run': False, 'io': Param({'autoplot': Param({'threaded': True, 'layout': 'default', 'dump': False, 'imfile': 'plots/%(run)s/%(run)s_%(engine)s_%(iterations)04d.png', 'interval': 1, 'make_movie': False, 'active': True}), 'home': './', 'interaction': Param({'active': True, 'client': Param({'connection_timeout': 3600000.0, 'poll_timeout': 100.0, 'pinginterval': 1, 'port': 5560, 'address': 'tcp://127.0.0.1'}), 'server': Param({'pinginterval': 2, 'connections': 10, 'pingtimeout': 10, 'poll_timeout': 10.0, 'active': True, 'port': 5560, 'address': 'tcp://127.0.0.1'})}), 'rfile': 'recons/%(run)s/%(run)s_%(engine)s_%(iterations)04d.ptyr', 'autosave': Param({'active': True, 'interval': 10, 'rfile': 'dumps/%(run)s/%(run)s_%(engine)s_%(iterations)04d.ptyr'})}), 'verbose_level': 1, 'ipython_kernel': False, 'scans': Param({})})</em><a class="headerlink" href="#ptypy.core.ptycho.Ptycho.DEFAULT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ptypy.core.ptycho.Ptycho.containers">
<code class="descname">containers</code><a class="headerlink" href="#ptypy.core.ptycho.Ptycho.containers" title="Permalink to this definition">¶</a></dt>
<dd><p>Dict of all <a class="reference internal" href="#ptypy.core.classes.Container" title="ptypy.core.classes.Container"><code class="xref any py py-class docutils literal"><span class="pre">Container</span></code></a> instances in the pool of self</p>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.ptycho.Ptycho.finalize">
<code class="descname">finalize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.ptycho.Ptycho.finalize" title="Permalink to this definition">¶</a></dt>
<dd><p>Cleanup</p>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.ptycho.Ptycho.init_communication">
<code class="descname">init_communication</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.ptycho.Ptycho.init_communication" title="Permalink to this definition">¶</a></dt>
<dd><p>Called on __init__ if <code class="docutils literal"><span class="pre">level</span> <span class="pre">&gt;=</span> <span class="pre">3</span></code>.</p>
<p>Initializes ZeroMQ communication on the master node and
spawns an optional plotting client.</p>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.ptycho.Ptycho.init_data">
<code class="descname">init_data</code><span class="sig-paren">(</span><em>print_stats=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.ptycho.Ptycho.init_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Called on __init__ if <code class="docutils literal"><span class="pre">level</span> <span class="pre">&gt;=</span> <span class="pre">2</span></code>.</p>
<p>Call <code class="xref py py-meth docutils literal"><span class="pre">ModelManager.new_data()</span></code>
Prints statistics on the ptypy structure if <code class="docutils literal"><span class="pre">print_stats=True</span></code></p>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.ptycho.Ptycho.init_engine">
<code class="descname">init_engine</code><span class="sig-paren">(</span><em>label=None</em>, <em>epars=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.ptycho.Ptycho.init_engine" title="Permalink to this definition">¶</a></dt>
<dd><p>Called on __init__ if <code class="docutils literal"><span class="pre">level</span> <span class="pre">&gt;=</span> <span class="pre">4</span></code>.</p>
<p>Initializes engine with label <cite>label</cite> from parameters and lists
it internally in <code class="docutils literal"><span class="pre">self.engines</span></code> which is an ordered dictionary.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>label</strong> (<em>str</em>) &#8211; Label of engine which is to be created from parameter set of
the same label in input parameter tree. If <code class="docutils literal"><span class="pre">None</span></code>, an engine
is created for each available parameter set in input parameter
tree sorted by label.</li>
<li><strong>epars</strong> (<em>Param or dict</em>) &#8211; Set of engine parameters. The created engine is listed as
<em>auto00</em>, <em>auto01</em> , etc in <code class="docutils literal"><span class="pre">self.engines</span></code></li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.ptycho.Ptycho.init_structures">
<code class="descname">init_structures</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.ptycho.Ptycho.init_structures" title="Permalink to this definition">¶</a></dt>
<dd><p>Called on __init__ if <code class="docutils literal"><span class="pre">level</span> <span class="pre">&gt;=</span> <span class="pre">1</span></code>.</p>
<p>Prepare everything for reconstruction. Creates attributes
<code class="xref py py-attr docutils literal"><span class="pre">model</span></code> and the containers <code class="xref py py-attr docutils literal"><span class="pre">probe</span></code> for
illumination, <code class="xref py py-attr docutils literal"><span class="pre">obj</span></code> for the samples, <code class="xref py py-attr docutils literal"><span class="pre">exit</span></code> for
the exit waves, <code class="xref py py-attr docutils literal"><span class="pre">diff</span></code> for diffraction data and
<code class="xref py py-attr docutils literal"><span class="pre">Ptycho.mask</span></code> for detectors masks</p>
</dd></dl>

<dl class="classmethod">
<dt id="ptypy.core.ptycho.Ptycho.load_run">
<em class="property">classmethod </em><code class="descname">load_run</code><span class="sig-paren">(</span><em>runfile</em>, <em>load_data=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.ptycho.Ptycho.load_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a previous run.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>runfile</strong> (<em>str</em>) &#8211; file dump of Ptycho class</li>
<li><strong>load_data</strong> (<em>bool</em>) &#8211; If <cite>True</cite> also load data (thus regenerating pods &amp; views
for &#8216;minimal&#8217; dump</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>P</strong> &#8211;
Ptycho instance with <code class="docutils literal"><span class="pre">level</span> <span class="pre">==</span> <span class="pre">2</span></code></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#ptypy.core.ptycho.Ptycho" title="ptypy.core.ptycho.Ptycho">Ptycho</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.ptycho.Ptycho.plot_overview">
<code class="descname">plot_overview</code><span class="sig-paren">(</span><em>fignum=100</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.ptycho.Ptycho.plot_overview" title="Permalink to this definition">¶</a></dt>
<dd><p>plots whole the first four layers of every storage in probe, object
% diff</p>
</dd></dl>

<dl class="attribute">
<dt id="ptypy.core.ptycho.Ptycho.pods">
<code class="descname">pods</code><a class="headerlink" href="#ptypy.core.ptycho.Ptycho.pods" title="Permalink to this definition">¶</a></dt>
<dd><p>Dict of all <a class="reference internal" href="#ptypy.core.classes.POD" title="ptypy.core.classes.POD"><code class="xref any py py-class docutils literal"><span class="pre">POD</span></code></a> instances in the pool of self</p>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.ptycho.Ptycho.print_stats">
<code class="descname">print_stats</code><span class="sig-paren">(</span><em>table_format=None</em>, <em>detail='summary'</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.ptycho.Ptycho.print_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the memory usage and other info of ptycho instance</p>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.ptycho.Ptycho.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>label=None</em>, <em>epars=None</em>, <em>engine=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.ptycho.Ptycho.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Called on __init__ if <code class="docutils literal"><span class="pre">level</span> <span class="pre">&gt;=</span> <span class="pre">5</span></code>.</p>
<p>Start the reconstruction with at least one engine.
As a consequence, <code class="docutils literal"><span class="pre">self.runtime</span></code> will be filled with content.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>label</strong> (<em>str, optional</em>) &#8211; Engine label of engine to run. If <code class="docutils literal"><span class="pre">None</span></code> all available
engines are run in the order they were stored in
<code class="docutils literal"><span class="pre">self.engines</span></code>. If the engine is not yet created,
<a class="reference internal" href="#ptypy.core.ptycho.Ptycho.init_engine" title="ptypy.core.ptycho.Ptycho.init_engine"><code class="xref py py-meth docutils literal"><span class="pre">init_engine()</span></code></a> is called for that label.</li>
<li><strong>epars</strong> (<em>dict or Param, optional</em>) &#8211; Engine parameter set. An engine is created from this set,
using <a class="reference internal" href="#ptypy.core.ptycho.Ptycho.init_engine" title="ptypy.core.ptycho.Ptycho.init_engine"><code class="xref py py-meth docutils literal"><span class="pre">init_engine()</span></code></a> and run immediately afterwards.
For parameters see <code class="xref py py-data docutils literal"><span class="pre">engine</span></code></li>
<li><strong>engine</strong> (<em>BaseEngine, optional</em>) &#8211; An engine instance that should be a subclass of
<code class="xref py py-class docutils literal"><span class="pre">BaseEngine</span></code> or have the same methods.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ptypy.core.ptycho.Ptycho.save_run">
<code class="descname">save_run</code><span class="sig-paren">(</span><em>alt_file=None</em>, <em>kind='minimal'</em>, <em>force_overwrite=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.ptycho.Ptycho.save_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Save run to file.</p>
<p>As for now, diffraction / mask data is not stored</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>alt_file</strong> (<em>str</em>) &#8211; Alternative filepath, will override io.save_file</li>
<li><strong>kind</strong> (<em>str</em>) &#8211; <p>Type of saving, one of:</p>
<ul>
<li><em>&#8216;minimal&#8217;</em>, only initial parameters, probe and object
storages and runtime information is saved.</li>
<li><em>&#8216;full_flat&#8217;</em>, (almost) complete environment</li>
</ul>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-ptypy.core.sample">
<span id="ptypy-core-sample-module"></span><h2>ptypy.core.sample module<a class="headerlink" href="#module-ptypy.core.sample" title="Permalink to this headline">¶</a></h2>
<p>This module generates a sample.</p>
<p>&#64;author: Bjoern Enders</p>
<p>This file is part of the PTYPY package.</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">copyright:</th><td class="field-body">Copyright 2014 by the PTYPY team, see AUTHORS.</td>
</tr>
<tr class="field-even field"><th class="field-name">license:</th><td class="field-body">GPLv2, see LICENSE for details.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="function">
<dt id="ptypy.core.sample.from_pars_old">
<code class="descclassname">ptypy.core.sample.</code><code class="descname">from_pars_old</code><span class="sig-paren">(</span><em>shape</em>, <em>lam</em>, <em>pars=None</em>, <em>dtype=&lt;type 'complex'&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.sample.from_pars_old" title="Permalink to this definition">¶</a></dt>
<dd><p><em>DEPRECATED</em></p>
</dd></dl>

<dl class="function">
<dt id="ptypy.core.sample.init_storage">
<code class="descclassname">ptypy.core.sample.</code><code class="descname">init_storage</code><span class="sig-paren">(</span><em>storage</em>, <em>sample_pars=None</em>, <em>energy=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.sample.init_storage" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes a storage as sample transmission.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>storage</strong> (<a class="reference internal" href="#ptypy.core.classes.Storage" title="ptypy.core.classes.Storage"><em>Storage</em></a>) &#8211; The object <a class="reference internal" href="#ptypy.core.classes.Storage" title="ptypy.core.classes.Storage"><code class="xref any py py-class docutils literal"><span class="pre">Storage</span></code></a> to initialize</li>
<li><strong>sample_pars</strong> (<a class="reference internal" href="ptypy.utils.html#ptypy.utils.parameters.Param" title="ptypy.utils.parameters.Param"><em>Param</em></a>) &#8211; Parameter structure that defines how the sample is created.
<em>FIXME</em> Link to parameters</li>
<li><strong>energy</strong> (<em>float, optional</em>) &#8211; Energy associated in the experiment for this sample object.
If None, the ptypy structure is searched for the appropriate
<code class="xref py py-class docutils literal"><span class="pre">Geo</span></code> instance:  <code class="docutils literal"><span class="pre">storage.views[0].pod.geometry.energy</span></code></li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="ptypy.core.sample.simulate">
<code class="descclassname">ptypy.core.sample.</code><code class="descname">simulate</code><span class="sig-paren">(</span><em>A</em>, <em>pars</em>, <em>energy</em>, <em>fill=1.0</em>, <em>prefix=''</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.sample.simulate" title="Permalink to this definition">¶</a></dt>
<dd><p>Simulates a sample object into model numpy array <cite>A</cite></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>A</strong> (<em>ndarray</em>) &#8211; Numpy array as buffer. Must be at least two-dimensional</li>
<li><strong>pars</strong> (<a class="reference internal" href="ptypy.utils.html#ptypy.utils.parameters.Param" title="ptypy.utils.parameters.Param"><em>Param</em></a>) &#8211; Simulation parameters. <em>FIXME</em> link to paramaters.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-ptypy.core.save_load">
<span id="ptypy-core-save-load-module"></span><h2>ptypy.core.save_load module<a class="headerlink" href="#module-ptypy.core.save_load" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="ptypy.core.save_load.link">
<code class="descclassname">ptypy.core.save_load.</code><code class="descname">link</code><span class="sig-paren">(</span><em>pool</em>, <em>replace_objects_only=False</em>, <em>preserve_input_pool=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.save_load.link" title="Permalink to this definition">¶</a></dt>
<dd><p>Reverse operation to unlink.</p>
</dd></dl>

<dl class="function">
<dt id="ptypy.core.save_load.unlink">
<code class="descclassname">ptypy.core.save_load.</code><code class="descname">unlink</code><span class="sig-paren">(</span><em>obj</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.save_load.unlink" title="Permalink to this definition">¶</a></dt>
<dd><p>Looks into all references of obj. Places references in a pool with
string labels resembling their python ID plus an object dependent prefix.
Reduces all objects and dicts to dictionaries.
Reduces all tuples to list.
All references are replaced by the labels in the pool.</p>
<p>Original references in &#8216;obj&#8217; are preserved</p>
</dd></dl>

<dl class="function">
<dt id="ptypy.core.save_load.to_h5">
<code class="descclassname">ptypy.core.save_load.</code><code class="descname">to_h5</code><span class="sig-paren">(</span><em>filename</em>, <em>obj</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.save_load.to_h5" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ptypy.core.save_load.from_h5">
<code class="descclassname">ptypy.core.save_load.</code><code class="descname">from_h5</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.save_load.from_h5" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-ptypy.core.xy">
<span id="ptypy-core-xy-module"></span><h2>ptypy.core.xy module<a class="headerlink" href="#module-ptypy.core.xy" title="Permalink to this headline">¶</a></h2>
<p>This module generates the scan patterns.</p>
<p>This file is part of the PTYPY package.</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">copyright:</th><td class="field-body">Copyright 2014 by the PTYPY team, see AUTHORS.</td>
</tr>
<tr class="field-even field"><th class="field-name">license:</th><td class="field-body">GPLv2, see LICENSE for details.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="function">
<dt id="ptypy.core.xy.from_pars">
<code class="descclassname">ptypy.core.xy.</code><code class="descname">from_pars</code><span class="sig-paren">(</span><em>xypars=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.xy.from_pars" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates position array from parameter tree <cite>pars</cite>. See <code class="xref py py-data docutils literal"><span class="pre">DEFAULT</span></code></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>xypars</strong> &#8211; TreeDict
Input parameters</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">ndarray pos
A numpy.ndarray of shape <code class="docutils literal"><span class="pre">(N,2)</span></code> for <em>N</em> positions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="ptypy.core.xy.round_scan">
<code class="descclassname">ptypy.core.xy.</code><code class="descname">round_scan</code><span class="sig-paren">(</span><em>dr=1.5e-06</em>, <em>nr=5</em>, <em>nth=5</em>, <em>bullseye=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.xy.round_scan" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a round scan</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>nr</strong> (<em>int</em>) &#8211; Number of radial steps from center, <code class="docutils literal"><span class="pre">nr</span> <span class="pre">+</span> <span class="pre">1</span></code> shells will be made</li>
<li><strong>dr</strong> (<em>float</em>) &#8211; Step size (shell spacing)</li>
<li><strong>nth</strong> (<em>int, optional</em>) &#8211; Number of points in first shell</li>
<li><strong>bullseye</strong> (<em>bool</em>) &#8211; If set false, point of origin will be ignored</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>pos</strong> &#8211;
A (N,2)-array of positions.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">ndarray</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ptypy.core</span> <span class="kn">import</span> <span class="n">xy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pos</span> <span class="o">=</span> <span class="n">xy</span><span class="o">.</span><span class="n">round_scan</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">pos</span><span class="p">[:,</span><span class="mi">1</span><span class="p">],</span> <span class="n">pos</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;o-&#39;</span><span class="p">);</span> <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ptypy.core.xy.raster_scan">
<code class="descclassname">ptypy.core.xy.</code><code class="descname">raster_scan</code><span class="sig-paren">(</span><em>dy=1.5e-06</em>, <em>dx=1.5e-06</em>, <em>ny=10</em>, <em>nx=10</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.xy.raster_scan" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a raster scan.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>nx</strong> (<em>ny,</em>) &#8211; Number of steps in <em>y</em> (vertical) and <em>x</em> (horizontal) direction
<em>x</em> is the fast axis</li>
<li><strong>dx</strong> (<em>dy,</em>) &#8211; Step size (grid spacing) in <em>y</em> and <em>x</em></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>pos</strong> &#8211;
A (N,2)-array of positions. It is <code class="docutils literal"><span class="pre">N</span> <span class="pre">=</span> <span class="pre">(nx+1)*(nx+1)</span></code></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">ndarray</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ptypy.core</span> <span class="kn">import</span> <span class="n">xy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pos</span> <span class="o">=</span> <span class="n">xy</span><span class="o">.</span><span class="n">raster_scan</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">pos</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">pos</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;o-&#39;</span><span class="p">);</span> <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ptypy.core.xy.spiral_scan">
<code class="descclassname">ptypy.core.xy.</code><code class="descname">spiral_scan</code><span class="sig-paren">(</span><em>dr=1.5e-06</em>, <em>r=7.5e-06</em>, <em>maxpts=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.core.xy.spiral_scan" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a spiral scan.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>r</strong> (<em>float</em>) &#8211; Number of radial steps from center, <code class="docutils literal"><span class="pre">nr</span> <span class="pre">+</span> <span class="pre">1</span></code> shells will be made</li>
<li><strong>dr</strong> (<em>float</em>) &#8211; Step size (shell spacing)</li>
<li><strong>nth</strong> (<em>int, optional</em>) &#8211; Number of points in first shell</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>pos</strong> &#8211;
A (N,2)-array of positions. It is</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">ndarray</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ptypy.core</span> <span class="kn">import</span> <span class="n">xy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pos</span> <span class="o">=</span> <span class="n">xy</span><span class="o">.</span><span class="n">spiral_scan</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">pos</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">pos</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;o-&#39;</span><span class="p">);</span> <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-ptypy.core">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-ptypy.core" title="Permalink to this headline">¶</a></h2>
<p>Core functionalities of the package.</p>
<p>This file is part of the PTYPY package.</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">copyright:</th><td class="field-body">Copyright 2014 by the PTYPY team, see AUTHORS.</td>
</tr>
<tr class="field-even field"><th class="field-name">license:</th><td class="field-body">GPLv2, see LICENSE for details.</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="ptypy.engines.html" title="ptypy.engines package"
             >next</a> |</li>
        <li class="right" >
          <a href="ptypy.html" title="ptypy package"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../content.html">ptypy 0.3.0 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="ptypy.html" >ptypy package</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2015, Pierre Thibault, Bjoern Enders and others.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
  </body>
</html>